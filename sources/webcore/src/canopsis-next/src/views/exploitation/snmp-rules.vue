<template lang="pug">
  div
    div
      snmp-rules-list(
      :snmpRules="snmpRules",
      :pending="snmpRulesPending",
      :showEditSnmpRuleModal="showEditSnmpRuleModal",
      :showDeleteSnmpRuleModal="showDeleteSnmpRuleModal",
      :showDeleteSelectedSnmpRuleModal="showDeleteSelectedSnmpRuleModal",
      )
    .fab
      v-layout(column)
        refresh-btn(@click="fetchList")
        v-tooltip(left)
          v-btn(slot="activator", color="primary", fab, dark, @click.stop="showCreateSnmpRuleModal")
            v-icon add
          span Add SNMP rule
</template>

<script>
import { MODALS } from '@/constants';

import modalMixin from '@/mixins/modal';
import entitiesSnmpRuleMixin from '@/mixins/entities/snmp-rule';

import SnmpRulesList from '@/components/other/snmp-rule/snmp-rules-list.vue';
import RefreshBtn from '@/components/other/view/refresh-btn.vue';

export default {
  components: { SnmpRulesList, RefreshBtn },
  mixins: [modalMixin, entitiesSnmpRuleMixin],
  data() {
    return {
      selected: [],
    };
  },
  mounted() {
    this.fetchList();
  },
  methods: {
    showCreateSnmpRuleModal() {
      this.showModal({
        name: MODALS.createSnmpRule,
      });
    },

    showEditSnmpRuleModal(snmpRule) {
      this.showModal({
        name: MODALS.createSnmpRule,
        config: {
          snmpRule,

          action: () => ({}),
        },
      });
    },

    showDeleteSnmpRuleModal() {
      this.showModal({
        name: MODALS.confirmation,
        config: {
          action: () => ({}),
        },
      });
    },

    showDeleteSelectedSnmpRuleModal() {
      this.showModal({
        name: MODALS.confirmation,
        config: {
          action: () => ({}),
        },
      });
    },

    fetchList() {
      this.fetchSnmpRulesList({
        params: {
          filter: '{"$and":[{}]}',
          limit: 10,
          sort: '[{}]',
          start: 0,
        },
      });
    },
  },
};
</script>
