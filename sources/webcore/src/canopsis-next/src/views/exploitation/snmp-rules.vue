<template lang="pug">
  div
    div
      v-data-table(
      v-model="selected",
      :items="snmpRules",
      :loading="snmpRulesPending",
      :headers="headers",
      item-key="_id",
      hide-actions,
      select-all
      )
        template(slot="items", slot-scope="props")
          tr
            td(@click.stop="")
              v-checkbox(v-model="props.selected", primary, hide-details)
            td
              v-chip.va-middle(color="info", text-color="white")
                strong mibName
              v-icon.va-middle(large) arrow_right_alt
              v-chip.va-middle(v-show="props.item.oid.mibName", color="warning", text-color="white")
                strong {{ props.item.oid.mibName }}
            td
              v-chip(color="info", text-color="white") mibName
              v-chip(color="warning", text-color="white") {{ props.item.oid.mibName }}
            td
              v-chip(color="info", text-color="white") mibName
              v-chip(color="warning", text-color="white") {{ props.item.oid.mibName }}
            td
              v-chip(color="info", text-color="white") mibName
              v-chip(color="warning", text-color="white") {{ props.item.oid.mibName }}
            td
              v-layout
                v-flex
                  v-btn(icon, small)
                    v-icon edit
                  v-btn.error--text(icon, small)
                    v-icon(color="error") delete
    .fab
      v-layout(column)
        refresh-btn(@click="fetchList")
        v-tooltip(left)
          v-btn(slot="activator", color="primary", fab, dark, @click.stop="showCreateSnmpRuleModal")
            v-icon add
          span Add SNMP rule
</template>

<script>
import { MODALS } from '@/constants';

import modalMixin from '@/mixins/modal';
import entitiesSnmpRuleMixin from '@/mixins/entities/snmp-rule';

import RefreshBtn from '@/components/other/view/refresh-btn.vue';

export default {
  components: { RefreshBtn },
  mixins: [modalMixin, entitiesSnmpRuleMixin],
  data() {
    return {
      selected: [],
    };
  },
  computed: {
    headers() {
      return [
        { text: 'oid', value: 'oid', sortable: false },
        { text: 'output', value: 'output', sortable: false },
        { text: 'resource', value: 'resource', sortable: false },
        { text: 'state', value: 'state', sortable: false },
        { text: 'actions', value: 'actions', sortable: false },
      ];
    },
  },
  mounted() {
    this.fetchList();
  },
  methods: {
    showCreateSnmpRuleModal() {
      this.showModal({
        name: MODALS.createSnmpRule,
      });
    },
    fetchList() {
      this.fetchSnmpRulesList();
    },
  },
};
</script>

<style lang="scss" scoped>
  .va-middle {
    vertical-align: middle;
  }
</style>
