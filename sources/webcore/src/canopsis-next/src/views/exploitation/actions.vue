<template lang="pug">
  div
    actions-list(
    :showDeleteActionModal="showDeleteActionModal",
    )
    .fab
      v-layout(column)
        refresh-btn(@click="fetchActionsList")
        v-tooltip(left)
          v-btn(
          slot="activator",
          color="primary",
          fab,
          dark,
          @click.stop="showCreateActionModal"
          )
            v-icon add
          span {{ $t('actions.addAction') }}
</template>

<script>
import { MODALS } from '@/constants';

import ActionsList from '@/components/other/action/actions-list.vue';
import RefreshBtn from '@/components/other/view/refresh-btn.vue';

import entitiesActionMixin from '@/mixins/entities/action';
import popupMixin from '@/mixins/popup';
import modalMixin from '@/mixins/modal';

export default {
  components: {
    ActionsList,
    RefreshBtn,
  },
  mixins: [entitiesActionMixin, popupMixin, modalMixin],
  mounted() {
    this.fetchActionsList();
  },
  methods: {
    showCreateActionModal() {
      this.showModal({
        name: MODALS.createAction,
        config: {
          action: async (data) => {
            await this.createAction({ data });

            this.fetchActionsList();
          },
        },
      });
    },

    showDeleteActionModal(id) {
      this.showModal({
        name: MODALS.confirmation,
        config: {
          action: () => this.removeAction({ id }),
        },
      });
    },
  },
};
</script>

