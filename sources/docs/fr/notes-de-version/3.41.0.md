# Notes de version Canopsis 3.41.0

Canopsis 3.41.0 a été publié le 25 mai 2020.

## Procédure d'installation

Suivre la [procédure d'installation de Canopsis](../guide-administration/installation/index.md).

## Procédure de mise à jour

Suivre la [procédure standard de mise à jour de Canopsis](../guide-administration/mise-a-jour/index.md).

En installation Docker, si vous utilisez les moteurs Go CAT `engine-webhook` ou `engine-dynamic-infos`, leur commande de lancement doit être modifiée pour correspondre à ce qui est utilisé dans les autres moteurs Go, c'est-à-dire sans `/cmd` :

```yaml hl_lines="9 18"
  dynamic-infos:
    image: canopsis/engine-dynamic-infos:${CANOPSIS_IMAGE_TAG}
    env_file:
      - compose.env
    depends_on:
      - "mongodb"
    restart: unless-stopped
#   command: /cmd/engine-dynamic-infos
    command: /engine-dynamic-infos
  webhook:
    image: canopsis/engine-webhook:${CANOPSIS_IMAGE_TAG}
    env_file:
      - compose.env
    depends_on:
      - "mongodb"
    restart: unless-stopped
#   command: /cmd/engine-webhook
    command: /engine-webhook
```

## Changements entre Canopsis 3.40.0 et 3.41.0

### Playlists

L'interface web offre maintenant la possibilité de créer des `playlists`. Les vues intégrées à ces playlists pourront défiler automatiquement dans le navigateur ou en mode plein écran. Le délai entre chaque vue est paramétrable. Il est également possible de générer un lien direct vers une `playlist`.

### Idle Rules

Le moteur `engine-action` est désormais capable de mesurer un délai d'inactivité sur une alarme et de déclencher une action au terme de ce délai. Les règles correspondantes sont appelés les `idle rules`. Elles sont gérées par une nouvelle API `/api/v2/idle-rule`. Le délai d'inactivité est mesuré à partir du dernier évènement reçu pour les alarmes correspondant au pattern défini dans la règle.

### Liste des modifications

*  **Documentation :**
    *  Ajout de la documentation de l'API `Idle rules` ([#2306](https://git.canopsis.net/canopsis/canopsis/issues/2306))
    *  Ajout de l'action "Commenter l'alarme" ([#2313](https://git.canopsis.net/canopsis/canopsis/issues/2313))
    * Mise à jour de la documentation des helpers handelbars pour prendre en compte l'ajout d'une option "case sensitive" ([#2346](https://git.canopsis.net/canopsis/canopsis/issues/2346))
    * Ajout de la documentation des `playlists` ([#2320](https://git.canopsis.net/canopsis/canopsis/issues/2320))
*  **API :**
    *  Introduction d'un nouvelle API pour la gestion des `Idle rules` ([#2306](https://git.canopsis.net/canopsis/canopsis/issues/2306))
*  **Moteurs :**
    *  **Moteurs nouvelle génération (Go) :**
        *  `engine-axe` :
            *  Ajout de la possibilité de changer la criticité d'une alarme vers l'état `info` ([#2305](https://git.canopsis.net/canopsis/canopsis/issues/2305))
            *  Une nouvelle fonctionnalité permet d'ajouter des commentaires à une alarme ([#2313](https://git.canopsis.net/canopsis/canopsis/issues/2313))
        *  `engine-action` : Ajout d'un nouveau déclencheur. Celui-ci permet de mesurer le temps passé depuis la réception du dernier évènement pour une alarme. A la fin du temps indiqué, une action sera exécutée sur l'alarme. Les règles correspondantes sont gérées par l'API `Idle rules` ([#2306](https://git.canopsis.net/canopsis/canopsis/issues/2306))
    *  **Moteurs ancienne génération (Python) :**
*  **UI :**
    *  **Administration :**
        *  Ajout d'un système de défilement automatique des vues : les `playlists` ([#2320](https://git.canopsis.net/canopsis/canopsis/issues/2320))
    *  **Corrélation :**
        *  Ajout d'une interface graphique de gestion des règles de corrélation ([#2329](https://git.canopsis.net/canopsis/canopsis/issues/2329))
