# Notes de version Canopsis 3.23.0

!!! information
    Les prochaines versions de Canopsis ne seront prochainement plus compatibles avec Debian 8, sorti début 2015. Pensez à migrer vers un environnement supporté, tel que Debian 9, CentOS 7 ou encore une installation Docker.

Canopsis 3.23.0 a été publié le 5 juillet 2019.

## Procédure de mise à jour

Suivre la [procédure standard de mise à jour de Canopsis](../guide-administration/mise-a-jour/index.md).

### Ajout d’un nouveau moteur `watcher`

Cette procédure est valable pour **les environnements Go**, c'est-à-dire lorsque des moteurs `axe` et `che` déjà présents.

La gestion des *watchers*, notamment nécessaire pour les Météos, a été déplacée du moteur `axe` vers un nouveau moteur `watcher` dédié.

`axe` continue à assurer ses autres tâches et ne doit pas être désactivé.

Le nouveau moteur `watcher` doit être activé à l'aide des commandes suivantes.


XXX fin procédure

Il n'y a pas d'autre action à réaliser pour mettre Canopsis à jour d'une version 3.22 à une version 3.23.

## Changements entre Canopsis 3.22.0 et 3.23.0

Voir le [ChangeLog complet](https://git.canopsis.net/canopsis/canopsis/blob/develop/CHANGELOG.md) pour plus de détails techniques.

*  **Documentation :**
    *  Ajout d'exemples de filtres d'entités dans [la documentation des cas d'usage des pbehaviors](../guide-utilisation/cas-d-usage/comportements_periodiques.md) ([#1724](https://git.canopsis.net/canopsis/canopsis/issues/1724))
    *  Ajout d'une documentation sur le [nettoyage de la base MongoDB](../guide-administration/administration-avancee/actions-base-donnees.md) ([#1787](https://git.canopsis.net/canopsis/canopsis/issues/1787))
    *  Modification de la documentation des moteurs, pour prendre en compte le nouveau moteur `watcher`
*  **Images Docker / paquets :**
    *  canoctl : Correction de divers problèmes avec l’outil de déploiement `canoctl` dans certaines configurations Debian ([#925](https://git.canopsis.net/canopsis/canopsis/issues/925))
    *  Docker : Correction d'un problème de compatibilité des fichiers `.env` avec les versions de Docker-Compose 1.24.0 et supérieures ([#1580](https://git.canopsis.net/canopsis/canopsis/issues/1580))
    *  Docker : les images de `canopsis` et `canopsis-cat` peuvent maintenant être préparées depuis un système hôte macOS ([#1484](https://git.canopsis.net/canopsis/canopsis/issues/1484))
    *  Python : Retour de la bibliothèque Python `amqp-2.5.0` vers `amqp-2.4.2`, la nouvelle version ayant des problèmes de compatibilité sur l'ancien Python de CentOS 7, dans certains cas d'utilisation (notamment pour le moteur `snmp` de CAT) ([#1775](https://git.canopsis.net/canopsis/canopsis/issues/1775))
    *  Moteurs Go : les moteurs Go des images et paquets officiels sont maintenant compilés avec des informations de débogage et une possibilité de *profiling*, afin d'améliorer la qualité des rapports de bug ([#117](https://git.canopsis.net/canopsis/go-revolution/issues/117), [#115](https://git.canopsis.net/canopsis/go-revolution/issues/115))
    *  CAT : Correction de dépendances système manquantes sur Debian et CentOS pour le bon fonctionnement du moteur `snmp` et l'envoi de MIB sur l'interface web ([#1773](https://git.canopsis.net/canopsis/canopsis/issues/1773))
*  **Moteurs :**
    *  **Moteurs nouvelle génération (Go) :**
        *  Ajout d'un nouveau moteur `watcher`, dédié aux fonctionnalités des *watchers*. Le moteur `axe` reste toujours nécessaire, mais ne réalisera plus cette tâche. Voir plus haut pour la procédure d'activation du nouveau moteur ([#116](https://git.canopsis.net/canopsis/go-revolution/issues/116))
        *  Ajout d'un avertissement lors de l'utilisation de TicketService, obsolète et remplacé par les Webhooks ([#118](https://git.canopsis.net/canopsis/go-revolution/issues/118))
        *  webhooks : Ajout d'un trigger `declareticket` dans les Webhooks ([#118](https://git.canopsis.net/canopsis/go-revolution/issues/118))
    *  **Moteurs ancienne génération (Python) :**
        *  Amélioration du mécanisme de reconnexion à RabbitMQ ([!984](https://git.canopsis.net/canopsis/canopsis/merge_requests/984))
*  **UI :**
    *  **Bac à alarmes :**
    *  **Météo des services :**
