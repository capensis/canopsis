<script type="text/x-handlebars" data-template-name="components/component-alarmactions">{{#each action in availableActions}}
  <button {{action 'sendAction' action}} type="button" class="btn btn-xs btn-default">
      <i {{bind-attr class=action.class}}></i>
  </button>
{{/each}}

{{#if hasLinks}}
  <div class="btn-group" style="display:flex">
      <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          <i class="fa fa-info"></i>
          <span class="caret"></span>
      </button>
      <ul class="dropdown-menu" role="menu" style="right:0; left:auto;">
        {{#each link in alarm.linklist.event_links}}
          <li>
              <a target="_blank" {{bind-attr href=link.url}}>{{link.label}}</a>
          </li>
        {{/each}}
      </ul>
  </div>
{{/if}}</script>
<script type="text/x-handlebars" data-template-name="components/component-alarmraw"><td>
    <div class="checkbox">
        <label>
            {{input type="checkbox" checked=alarm.isSelected}}
        </label>
    </div>
</td>
{{#each field in fields}}
    {{#component-alarmtd alarm=alarm field=field action='tdClick'}}
    {{/component-alarmtd}}
{{/each}}

{{#component-alarmactions alarm=alarm action='sendAction'}}
{{/component-alarmactions}}</script>
<script type="text/x-handlebars" data-template-name="components/component-alarmstate"><div class="form-group">
    <div class="radio">
        <label>
            {{view Ember.RadioButton name="alarmStateSelecation" selectionBinding="state" value="opened"}}
            opened
        </label>
    </div>
    <div class="radio">
        <label>
            {{view Ember.RadioButton name="alarmStateSelecation" selectionBinding="state" value="resolved"}}
            resolved
        </label>
    </div>
</div></script>
<script type="text/x-handlebars" data-template-name="components/component-alarmtable">{{#each tmpl in Ember.columnTemplates}}
  {{#component-popupinfo columnName=tmpl.columnName clickedField=clickedField clickedAlarm=clickedAlarm updater=updater}}
  {{/component-popupinfo}}
{{/each}}

<div class="box-body">
    <div class="table-responsive">
        <table class="table no-margin">
            <thead>
                <tr>
                    <th>
                        <div class="checkbox">
                            <label>
                                {{input type="checkbox" checked=isAllChecked}}
                            </label>
                        </div>
                    </th>
                    {{#each field in fields}}
                        {{#if field.isSortable}}
                            <th {{action 'click' field}}>{{field.humanName}} <i {{bind-attr class=":fa field.isASC:fa-caret-down:fa-caret-up"}} aria-hidden="true"></i></th>
                        {{else}}
                            <th {{action 'click' field}}>{{field.humanName}}</th>                    
                        {{/if}}
                    {{/each}}
                    <th>actions</th>        
                </tr>
            </thead>
            <tbody>
                {{#each alarm in alarms}}
                
                    {{#component-alarmraw alarm=alarm fields=controller.fields action='tdClick' saction='sendAction'}}
                    {{/component-alarmraw}}

                {{/each}}
            </tbody>
        </table>
    </div>
</div>
</script>
<script type="text/x-handlebars" data-template-name="components/component-alarmtd">{{#if hasRenderer}}
  {{component-renderer rendererType=renderer value=value}}
{{else}}
  {{value}}
{{/if}}</script>
<script type="text/x-handlebars" data-template-name="components/component-columntemplate"><div class="form-inline">
    <div class="form-group">
        Column name: {{input value=column class="form-control" type="text"}}
    </div>
    <div class="form-group">
        Template: {{summernote-editor content=template}}
    </div>
</div></script>
<script type="text/x-handlebars" data-template-name="components/component-popupinfo"><div style="position: absolute; left: 50%;display:none;" class="popupinfo">
    <div style="position: relative; left: -50%;">
        <div class="text-center alert alert-info alert-dismissable">
            <i class="fa fa-info"></i>
            <button {{action 'hide'}} type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <div class="recordinfopopuphandle">
                <b>info</b><hr/>
            </div>
            <div class="recordinfopopupcontent">
                {{view columnTemplate contextBinding=clickedAlarm}}
            </div>
        </div>
    </div>       
</div>
</script>
<script type="text/x-handlebars" data-template-name="components/component-rendererack">{{#each prop in propertiesMap}}
    {{prop.key}}: {{prop.value}}<br>
{{/each}}</script>
<script type="text/x-handlebars" data-template-name="components/component-rendererstate"><span {{bind-attr class=spanClass}}>{{caption}}</span></script>
<script type="text/x-handlebars" data-template-name="components/component-rendererstatetimestamp">{{timeSince timestamp}}</script>
<script type="text/x-handlebars" data-template-name="components/component-rendererstatusval">{{status}}</script>
<script type="text/x-handlebars" data-template-name="components/component-search">{{input insert-newline='search' value=value class="form-control inlineInput" placeholder="Search" type="text"}}
<span class="input-group-btn">
    <button {{action 'resetValue'}} class="btn btn-default btn-flat">
        <span class="glyphicon glyphicon-remove-circle"></span>
    </button>
    <button {{action 'search'}} class="btn btn-primary btn-flat">
        <span class="fa fa-search"></span>
    </button>
</span>
{{#unless isValid}}
  <p class='search-invalid-message'>Invalid search query</p>
{{/unless}}</script>
<script type="text/x-handlebars" data-template-name="components/component-selectionactions"><div class="pull-left">
    {{tr 'Selection'}} :
    {{#each action in actionsMap}}
      <button class="btn btn-default btn-sm" {{action 'sendAction' action}} >
          <span {{bind-attr class=action.class}}></span>
          {{action.caption}}
      </button>
    {{/each}}
</div></script>
<script type="text/x-handlebars" data-template-name="editor-pair">{{!*
 * @editor pair
}}
{{component-columntemplate content=attr.value}}</script>
<script type="text/x-handlebars" data-template-name="editor-radio">{{!*
 * @editor radio
}}
{{component-alarmstate content=attr.value}}</script>
<script type="text/x-handlebars" data-template-name="_v_ack">{{#component-rendererack value=value}}
{{/component-rendererack}}</script>
<script type="text/x-handlebars" data-template-name="_v_state_t">{{#component-rendererstatetimestamp value=value}}
{{/component-rendererstatetimestamp}}</script>
<script type="text/x-handlebars" data-template-name="_v_state_val">{{#component-rendererstate value=value}}
{{/component-rendererstate}}</script>
<script type="text/x-handlebars" data-template-name="_v_status_val">{{#component-rendererstatusval value=value}}
{{/component-rendererstatusval}}</script>
<script type="text/x-handlebars" data-template-name="listalarm">{{#component-selectionactions action='massAction'}}
{{/component-selectionactions}}

{{#component-search action='search' value=controller.searchText isValid=controller.isValidSearchText}}
{{/component-search}}


{{#if controller.rights.list_filters.checksum}}
    <div class="pull-right btn-group" data-toggle="btn-toggle">
        {{#each filter in controller.filters_list}}
            <span type="button" {{bind-attr class=":btn filter.isActive:btn-primary:btn-default :btn-sm :editable filter.isActive:active"}} data-col="all" {{action "setFilter" filter}}>
                {{filter.title}}
            </span>
        {{/each}}
        {{#each filter in controller.custom_filters_list}}
            <span type="button" {{bind-attr class=":btn filter.isActive:btn-primary:btn-default :btn-sm :editable filter.isActive:active "}} data-col="all" {{action "selectFilter" filter}}>
                {{filter.title}}
                <small class="badge bg-blue" {{action "editFilter" filter}}> <i class="fa fa-wrench"></i></small>
                <small class="badge bg-orange" {{action "removeFilter" filter}}> <i class="fa fa-minus"></i></small>
            </span>
        {{/each}}
        {{#each filter in controller.user_filters}}
            <span type="button" {{bind-attr class=":btn filter.isActive:btn-primary:btn-default :btn-sm :editable filter.isActive:active "}} data-col="all" {{action "setFilter" filter}}>
                {{filter.title}}
                <small class="badge bg-blue" {{action "editFilter" filter}}> <i class="fa fa-wrench"></i></small>
                <small class="badge bg-orange" {{action "removeFilter" filter}}> <i class="fa fa-minus"></i></small>
            </span>
        {{/each}}
        {{#if controller.mixinOptions.customfilterlist.can_mix_filters}}
            {{#each operator in controller.customFilterOperators}}
                <button {{bind-attr class=":btn operator.active:btn-primary:btn-default :btn-sm operator.active:active"}} {{action "setActiveOperator" operator}}>{{operator.display}}</button>
            {{/each}}
        {{/if}}
        {{#if controller.canAddCustomFiltersInUserPreferences}}
            <button type="button" class="btn btn-primary btn-sm btn-add-customfilter" {{action "addUserFilter"}} data-col="all">
                <i class="fa fa-plus"></i> {{tr 'Add filter'}}
            </button>
        {{/if}}
    </div>
{{/if}}


<div class="pull-left dataTables_filter" style='margin-top:0'>
    {{view Ember.Select
        content=controller.itemsPerPagePropositions
        value=controller.itemsPerPagePropositionSelected
        class="inlineInput form-control input-sm"
    }}
    {{tr 'records per page'}}
</div>


{{!--2 / 6--}}
{{#unless controller.hasOnePage}}
    <div class="pull-right" style="padding-left:4px">
        {{#unless controller.isFirstPage}}
            <span class="btn-group">
                <button type="button" class="btn btn-sm btn-default" {{action "firstPage"}}>
                    <span class="glyphicon glyphicon-step-backward"></span>
                </button>
                <button type="button" class="btn btn-sm btn-default" {{action "prevPage"}}>
                    <span class="glyphicon glyphicon-chevron-left"></span>
                </button>
            </span>
        {{/unless}}
        <span style="float:left; padding:4px">
            {{controller.currentPage}} / {{controller.totalPages}}
        </span>
        {{#unless controller.isLastPage}}
            <span class="btn-group">
                <button type="button" class="btn btn-sm btn-default" {{action "nextPage"}}>
                    <span class="glyphicon glyphicon-chevron-right"></span>
                </button>
                <button type="button" class="btn btn-sm btn-default" {{action "lastPage"}}>
                    <span class="glyphicon glyphicon-step-forward"></span>
                </button>
            </span>
        {{/unless}}
    </div>
{{/unless}}

{{#component-alarmtable saction='sendCustomAction' action='updateSortField' defaultSortColumn=controller.sortColumn sortOrder=controller.default_sort_column.direction alarms=controller.alarms fields=controller.fields}}
{{/component-alarmtable}}


<div style='padding-bottom: 30px;'>
{{!--pagination info--}}
<div class="pull-left btn-group">
    {{tr 'Showing'}} {{controller.paginationFirstItemIndex}} {{tr 'to'}} {{controller.paginationLastItemIndexx}} {{tr 'of'}} {{controller.itemsTotal}} {{tr 'entries'}}
</div>

{{!--2 / 6--}}
{{#unless controller.hasOnePage}}
    <div class="pull-right btn-group" style="padding-left:4px;">
        {{#unless controller.isFirstPage}}
            <span class="btn-group">
                <button type="button" class="btn btn-sm btn-default" {{action "firstPage"}}>
                    <span class="glyphicon glyphicon-step-backward"></span>
                </button>
                <button type="button" class="btn btn-sm btn-default" {{action "prevPage"}}>
                    <span class="glyphicon glyphicon-chevron-left"></span>
                </button>
            </span>
        {{/unless}}
        <span style="float:left; padding:4px">
            {{controller.currentPage}} / {{controller.totalPages}}
        </span>
        {{#unless controller.isLastPage}}
            <span class="btn-group">
                <button type="button" class="btn btn-sm btn-default" {{action "nextPage"}}>
                    <span class="glyphicon glyphicon-chevron-right"></span>
                </button>
                <button type="button" class="btn btn-sm btn-default" {{action "lastPage"}}>
                    <span class="glyphicon glyphicon-step-forward"></span>
                </button>
            </span>
        {{/unless}}
    </div>
{{/unless}}

</div></script>
