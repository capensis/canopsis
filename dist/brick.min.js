Ember.Application.initializer({name:"AlertExpressionAdapter",after:["ApplicationAdapter"],initialize:function(t,e){var r=t.lookupFactory("adapter:application"),i=r.extend({findQuery:function(t,e){var r="/alerts/search/validate";return this.ajax(r,"GET",{data:e})}});e.register("adapter:alertexpression",i)}}),Ember.Application.initializer({name:"AlertsAdapter",after:["ApplicationAdapter"],initialize:function(t,e){var r=t.lookupFactory("adapter:application"),i=r.extend({findQuery:function(t,e){var r="/alerts/get-alarms";return this.ajax(r,"GET",{data:e})}});e.register("adapter:alerts",i)}}),Ember.Application.initializer({name:"component-alarmraw",initialize:function(t,e){var r=Ember.get,i=Ember.set,n=(Ember.isNone,Ember.Component.extend({tagName:"tr",init:function(){this._super(),i(this,"alarm",r(this,"alarm")),i(this,"fields",r(this,"fields"))}}));e.register("component:component-alarmraw",n)}}),Ember.Application.initializer({name:"component-alarmtable",initialize:function(t,e){var r=Ember.get,i=(Ember.set,Ember.isNone,Ember.Component.extend({init:function(){this._super()},currentSortColumn:function(){return r(this,"defaultSortColumn")}.property("defaultSortColumn"),sAlarms:function(){return Ember.ArrayProxy.extend(Ember.SortableMixin).create({sortProperties:[this.get("currentSortColumn.name")],sortAscending:this.get("currentSortColumn.isASC"),content:r(this,"alarms")})}.property("alarms","currentSortColumn.isASC","currentSortColumn.name"),actions:{click:function(t){t==this.get("currentSortColumn")?this.set("currentSortColumn.isASC",!this.get("currentSortColumn.isASC")):(this.set("currentSortColumn.isSortable",!1),this.set("currentSortColumn",t),this.set("currentSortColumn.isSortable",!0),this.set("currentSortColumn.isASC",!0))}}}));e.register("component:component-alarmtable",i)}}),Ember.Application.initializer({name:"component-alarmtd",initialize:function(t,e){var r=Ember.get,i=Ember.set,n=(Ember.isNone,Ember.Component.extend({tagName:"td",init:function(){this._super(),i(this,"alarm",r(this,"alarm")),i(this,"field",r(this,"field"))},value:function(){var t=r(this,"alarm"),e=r(this,"field");return r(t,e.name)}.property("alarm","field")}));e.register("component:component-alarmtd",n)}}),Ember.Application.initializer({name:"AlertExpressionSerializer",after:["ApplicationSerializer"],initialize:function(t,e){var r=t.lookupFactory("serializer:application"),i=r.extend({});e.register("serializer:alertexpression",i)}}),Ember.Application.initializer({name:"AlertsSerializer",after:["ApplicationSerializer"],initialize:function(t,e){var r=t.lookupFactory("serializer:application"),i=r.extend({});e.register("serializer:alerts",i)}}),Ember.Application.initializer({name:"ListAlarmWidget",after:["TimeWindowUtils","DataUtils","WidgetFactory","UserconfigurationMixin","SchemasLoader"],initialize:function(t,e){var r=(t.lookupFactory("utility:timewindow"),t.lookupFactory("utility:data")),i=t.lookupFactory("factory:widget"),n=t.lookupFactory("mixin:userconfiguration"),o=Ember.get,a=Ember.set,s=(Ember.isNone,{mixins:[n]}),l=i("listalarm",{viewMixins:[],init:function(){this._super.apply(this,arguments),this.fetchAlarms(),this.valideExpression(),a(this,"store",DS.Store.extend({container:o(this,"container")})),this.showParams(),this.setFields()},showParams:function(){var t=this,e=["popup","title"];console.error("brick's parameters"),e.forEach(function(e){console.error(e+": "+t.get("model."+e))}),console.error("default_sort_column: "+t.get("model.default_sort_column.property")+"-"+t.get("model.default_sort_column.direction")),console.error("columnts: "+t.get("model.columns").join(" "))},refreshContent:function(){},fetchAlarms:function(){var t=this,e={tstart:1483225200,tstop:1583225200,sort_key:this.get("model.default_sort_column.property"),sort_dir:this.get("model.default_sort_column.direction")},i=r.getEmberApplicationSingleton().__container__.lookup("adapter:alerts");i.findQuery("alerts",e).then(function(e){var r=o(e,"data");t.setAlarmsForShow(r[0].alarms),console.log("alerts::",r)},function(t){})},valideExpression:function(){var t={expression:"a=1"},e=r.getEmberApplicationSingleton().__container__.lookup("adapter:alertexpression");e.findQuery("alertexpression",t).then(function(t){var t=o(t,"data");console.error("alertexpression result",t)},function(t){console.error("ERROR in the adapter: ",t)})},setFields:function(){this.set("fields",this.parseFields(o(this,"model.columns")))},setAlarmsForShow:function(t){var e=o(this,"fields"),r=t.map(function(t){var r={};return e.forEach(function(e){r[e.name]=o(Ember.Object.create(t),"v."+e.getValue)}),r});this.set("alarms",r)},parseFields:function(t){var e=["state","status"],r=[],i=this.get("model.default_sort_column.property"),n=this.get("model.default_sort_column.direction");return r=t.map(function(t){var r={};return r.name=t,r.isSortable=t==i,r.isASC="ASC"==n,e.includes(t)?r.getValue=t+".val":r.getValue=t,r})},sortColumn:function(){return o(this,"fields").findBy("name",o(this,"controller.default_sort_column.property"))}.property("controller.default_sort_column.property","fields.[]")},s);e.register("widget:listalarm",l)}});
//# sourceMappingURL=dist/brick.map.js