Ember.Application.initializer({name:"AlarmsWidget",after:["TimeWindowUtils","DataUtils","WidgetFactory","AlarmsView","UserconfigurationMixin","SchemasLoader"],initialize:function(t,e){var i=t.lookupFactory("utility:timewindow"),r=t.lookupFactory("utility:data"),a=t.lookupFactory("factory:widget"),s=t.lookupFactory("view:alarms"),o=t.lookupFactory("mixin:userconfiguration"),n=Ember.get,m=Ember.set,d=Ember.isNone,l={mixins:[o]},u=a("statstable",{viewMixins:[s],init:function(){this._super.apply(this,arguments),this.setParams(),m(this,"store",DS.Store.extend({container:n(this,"container")}))},updateInterval:function(t){var e=n(t,"timestamp.$gte"),i=n(t,"timestamp.$lte");d(e)?m(this,"from",void 0):m(this,"from",1e3*e),d(i)?m(this,"to",void 0):m(this,"to",1e3*i),this.setParams()},refreshContent:function(){},setParams:function(){var t=this,e=i.getFromTo(n(t,"time_window"),n(t,"time_window_offset")),r=e[0],a=e[1],s=n(t,"from"),o=n(t,"to");d(s)||(r=s),d(o)||(a=o);var l={timewindow:{from:parseInt(r/1e3),to:parseInt(a/1e3)},title:n(t,"model.title"),domain:n(t,"model.domain"),perimeter:n(t,"model.perimeter"),user:n(t,"model.user"),show_events:n(t,"model.show_events"),show_users:n(t,"model.show_users")};m(t,"widgetParams",l),n(t,"model.show_events")&&t.fetchEvents(),n(t,"model.show_users")&&t.fetchUser()},fetchEvents:function(){var t=this,e={domain:n(t,"widgetParams.domain"),perimeter:n(t,"widgetParams.perimeter")},i=JSON.stringify(e),a={tstart:n(t,"widgetParams.timewindow.from"),tstop:n(t,"widgetParams.timewindow.to"),tags:i},s=r.getEmberApplicationSingleton().__container__.lookup("adapter:statstableevents");s.findQuery("statstableevents",a).then(function(e){var i=n(e,"data");m(t,"statsevent",i[0]),t.trigger("disableLoading")},function(t){console.error("ERROR in the adapter: ",t)})},fetchUser:function(){var t=this,e={domain:n(t,"widgetParams.domain"),perimeter:n(t,"widgetParams.perimeter")},i=JSON.stringify(e),a={tstart:n(t,"widgetParams.timewindow.from"),tstop:n(t,"widgetParams.timewindow.to"),users:n(t,"widgetParams.user"),tags:i},s=r.getEmberApplicationSingleton().__container__.lookup("adapter:statstableuser");s.findQuery("statstableuser",a).then(function(e){var i=n(e,"data");m(t,"statsuser",i),t.trigger("disableLoading")},function(t){console.error("ERROR in the adapter: ",t)})}},l);e.register("widget:statstable",u)}}),Ember.Application.initializer({name:"AlarmsView",initialize:function(t,e){var i=(Ember.get,Ember.set,Ember.isNone,Ember.Mixin.create({didInsertElement:function(){this._super.apply(this,arguments)},willDestroyElement:function(){}}));e.register("view:alarms",i)}});
//# sourceMappingURL=dist/brick.map.js