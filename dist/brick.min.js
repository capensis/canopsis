Ember.Application.initializer({name:"AlertExpressionAdapter",after:["ApplicationAdapter"],initialize:function(t,e){var i=t.lookupFactory("adapter:application"),r=i.extend({findQuery:function(t,e){var i="/alerts/search/validate";return this.ajax(i,"GET",{data:e})}});e.register("adapter:alertexpression",r)}}),Ember.Application.initializer({name:"AlertsAdapter",after:["ApplicationAdapter"],initialize:function(t,e){var i=t.lookupFactory("adapter:application"),r=i.extend({findQuery:function(t,e){var i="/alerts/get-alarms";return this.ajax(i,"GET",{data:e})}});e.register("adapter:alerts",r)}}),Ember.Application.initializer({name:"component-alarmraw",initialize:function(t,e){var i=Ember.get,r=Ember.set,o=(Ember.isNone,Ember.Component.extend({tagName:"tr",init:function(){this._super(),r(this,"alarm",i(this,"alarm")),r(this,"fields",i(this,"fields"))}}));e.register("component:component-alarmraw",o)}}),Ember.Application.initializer({name:"component-alarmtable",initialize:function(t,e){var i=Ember.get,r=(Ember.set,Ember.isNone,Ember.Component.extend({init:function(){this._super()},currentSortColumn:function(){return i(this,"defaultSortColumn")}.property("defaultSortColumn"),sAlarms:function(){return this.get("alarms")}.property("alarms"),actions:{click:function(t){t==this.get("currentSortColumn")?this.set("currentSortColumn.isASC",!this.get("currentSortColumn.isASC")):(this.set("currentSortColumn.isSortable",!1),this.set("currentSortColumn",t),this.set("currentSortColumn.isSortable",!0),this.set("currentSortColumn.isASC",!0)),this.sendAction("action",this.get("currentSortColumn"))}}}));e.register("component:component-alarmtable",r)}}),Ember.Application.initializer({name:"component-alarmtd",initialize:function(t,e){var i=Ember.get,r=Ember.set,o=(Ember.isNone,Ember.Component.extend({tagName:"td",init:function(){this._super(),r(this,"alarm",i(this,"alarm")),r(this,"field",i(this,"field"))},value:function(){var t=i(this,"alarm"),e=i(this,"field");return i(t,e.name)}.property("alarm","field")}));e.register("component:component-alarmtd",o)}}),Ember.Application.initializer({name:"component-popup",initialize:function(t,e){var i=Ember.get,r=Ember.set,o=(Ember.isNone,Ember.Component.extend({init:function(){this._super();var t=i(this,"cView"),e=i(this,"column");r(this,"column",e),r(this,"columnView",t)},popup:function(){this.get("clickedField.name")==this.get("column")&&(this.set("columnViewContext",this.get("clickedAlarm")),this.$(".modal").modal("show"))}.observes("listener")}));e.register("component:component-popup",o)}}),Ember.Application.initializer({name:"RinfopopMixin",after:"MixinFactory",initialize:function(t,e){var i=t.lookupFactory("factory:mixin"),r=Ember.get,o=i("rinfopop",{actions:{sendDisplayRecord:function(t){console.log("sendDisplayRecord action called with params",t);var e=r(this,"mixinOptions.rinfopop.popup_template");Ember.isNone(e)&&(e=""),console.log("Template is ",e);var i=r(this,"controllers.rinfopop");i.send("show",t,e)}},rendererFor:function(t){var e=r(this,"mixinOptions.rinfopop.clickable_column");return console.log("recordinfopopup rendererFor",t,e),t.field===e?"renderer-recordinfopopup":this._super(t)}});e.register("mixin:rinfopop",o)}}),Ember.Application.initializer({name:"AlertExpressionSerializer",after:["ApplicationSerializer"],initialize:function(t,e){var i=t.lookupFactory("serializer:application"),r=i.extend({});e.register("serializer:alertexpression",r)}}),Ember.Application.initializer({name:"AlertsSerializer",after:["ApplicationSerializer"],initialize:function(t,e){var i=t.lookupFactory("serializer:application"),r=i.extend({});e.register("serializer:alerts",r)}}),Ember.Application.initializer({name:"ListAlarmWidget",after:["TimeWindowUtils","DataUtils","WidgetFactory","UserconfigurationMixin","SchemasLoader"],initialize:function(t,e){var i=(t.lookupFactory("utility:timewindow"),t.lookupFactory("utility:data")),r=t.lookupFactory("factory:widget"),o=t.lookupFactory("mixin:userconfiguration"),n=Ember.get,a=Ember.set,s=(Ember.isNone,{mixins:[o]}),l=r("listalarm",{viewMixins:[],needs:["rinfopop"],init:function(){this._super.apply(this,arguments),this.fetchAlarms(),this.valideExpression(),a(this,"store",DS.Store.extend({container:n(this,"container")})),this.showParams(),this.setFields()},showParams:function(){var t=this,e=["popup","title"];console.error("brick's parameters"),e.forEach(function(e){console.error(e+": "+t.get("model."+e))}),console.error("default_sort_column: "+t.get("model.default_sort_column.property")+"-"+t.get("model.default_sort_column.direction")),console.error("columnts: "+t.get("model.columns").join(" "))},refreshContent:function(){},fetchAlarms:function(t){var e=this,r=t||{},o={resolved:!0,tstart:r.tstart||1483225200,tstop:r.tstop||1583225200,sort_key:r.sort_key||this.get("model.default_sort_column.property"),sort_dir:r.sort_dir||this.get("model.default_sort_column.direction")},a=i.getEmberApplicationSingleton().__container__.lookup("adapter:alerts");a.findQuery("alerts",o).then(function(t){var i=n(t,"data");e.setAlarmsForShow(i[0].alarms),console.log("alerts::",i)},function(t){})},valideExpression:function(){var t={expression:"a=1"},e=i.getEmberApplicationSingleton().__container__.lookup("adapter:alertexpression");e.findQuery("alertexpression",t).then(function(t){var t=n(t,"data");console.error("alertexpression result",t)},function(t){console.error("ERROR in the adapter: ",t)})},setFields:function(){this.set("fields",this.parseFields(n(this,"model.columns")))},setAlarmsForShow:function(t){var e=n(this,"fields"),i=t.map(function(t){var i={};return e.forEach(function(e){i[e.name]=n(Ember.Object.create(t),"v."+e.getValue)}),i});this.set("alarms",i)},parseFields:function(t){var e=["state","status"],i=[],r=this.get("model.default_sort_column.property"),o=this.get("model.default_sort_column.direction");return i=t.map(function(t){var i={};return i.name=t,i.isSortable=t==r,i.isASC="ASC"==o,e.includes(t)?i.getValue=t+".val":i.getValue=t,i})},sortColumn:function(){var t=n(this,"fields").findBy("name",n(this,"controller.default_sort_column.property"));return t?t:(t=n(this,"fields.firstObject"),t.isSortable=!0,t.isASC=n(this,"controller.default_sort_column.property"),console.error('the column "'+n(this,"controller.default_sort_column.property")+'" was not found.'),t)}.property("controller.default_sort_column.property","fields.[]"),actions:{updateSortField:function(t){var e={};e.sort_key=t.name,e.sort_dir=t.isASC?"ASC":"DESC",this.fetchAlarms(e)}}},s);e.register("widget:listalarm",l)}});
//# sourceMappingURL=dist/brick.map.js