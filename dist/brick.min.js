Ember.Application.initializer({name:"AlertExpressionAdapter",after:["ApplicationAdapter"],initialize:function(e,t){var i=e.lookupFactory("adapter:application"),r=i.extend({findQuery:function(e,t){var i="/alerts/search/validate";return this.ajax(i,"GET",{data:t})}});t.register("adapter:alertexpression",r)}}),Ember.Application.initializer({name:"AlertsAdapter",after:["ApplicationAdapter"],initialize:function(e,t){var i=e.lookupFactory("adapter:application"),r=i.extend({findQuery:function(e,t){var i="/alerts/get-alarms";return this.ajax(i,"GET",{data:t})}});t.register("adapter:alerts",r)}}),Ember.Application.initializer({name:"component-alarmraw",initialize:function(e,t){var i=Ember.get,r=Ember.set,a=(Ember.isNone,Ember.Component.extend({tagName:"tr",init:function(){this._super(),r(this,"alarm",i(this,"alarm")),r(this,"fields",i(this,"fields"))}}));t.register("component:component-alarmraw",a)}}),Ember.Application.initializer({name:"component-alarmtd",initialize:function(e,t){var i=Ember.get,r=Ember.set,a=(Ember.isNone,Ember.Component.extend({tagName:"td",init:function(){this._super(),r(this,"alarm",i(this,"alarm")),r(this,"field",i(this,"field"))},value:function(){var e=i(this,"alarm"),t=i(this,"field");return i(e,t.name)}.property("alarm","field")}));t.register("component:component-alarmtd",a)}}),Ember.Application.initializer({name:"AlertExpressionSerializer",after:["ApplicationSerializer"],initialize:function(e,t){var i=e.lookupFactory("serializer:application"),r=i.extend({});t.register("serializer:alertexpression",r)}}),Ember.Application.initializer({name:"AlertsSerializer",after:["ApplicationSerializer"],initialize:function(e,t){var i=e.lookupFactory("serializer:application"),r=i.extend({});t.register("serializer:alerts",r)}}),Ember.Application.initializer({name:"ListAlarmWidget",after:["TimeWindowUtils","DataUtils","WidgetFactory","UserconfigurationMixin","SchemasLoader"],initialize:function(e,t){var i=(e.lookupFactory("utility:timewindow"),e.lookupFactory("utility:data")),r=e.lookupFactory("factory:widget"),a=e.lookupFactory("mixin:userconfiguration"),n=Ember.get,o=Ember.set,s=(Ember.isNone,{mixins:[a]}),l=r("listalarm",{viewMixins:[],init:function(){this._super.apply(this,arguments),this.fetchAlarms(),this.valideExpression(),o(this,"store",DS.Store.extend({container:n(this,"container")})),this.showParams()},showParams:function(){var e=this,t=["popup","title"];console.error("brick's parameters"),t.forEach(function(t){console.error(t+": "+e.get("model."+t))}),console.error("default_sort_column: "+e.get("model.default_sort_column.property")+"-"+e.get("model.default_sort_column.direction"))},refreshContent:function(){},fetchAlarms:function(){var e=this,t={tstart:1483225200,tstop:1583225200,sort_key:"resource",sort_dir:"ASC"},r=i.getEmberApplicationSingleton().__container__.lookup("adapter:alerts");r.findQuery("alerts",t).then(function(t){var i=n(t,"data");e.setAlarmsForShow(i[0].alarms),console.log("alerts::",i)},function(e){})},valideExpression:function(){var e={expression:"a=1"},t=i.getEmberApplicationSingleton().__container__.lookup("adapter:alertexpression");t.findQuery("alertexpression",e).then(function(e){var e=n(e,"data");console.error("alertexpression result",e)},function(e){console.error("ERROR in the adapter: ",e)})},setAlarmsForShow:function(e){var t=["component","resource","connector","connector_name","state"],i=this.parseFields(t),r=e.map(function(e){var t={};return i.forEach(function(i){t[i.name]=n(Ember.Object.create(e),"v."+i.getValue)}),t});this.set("alarms",r),this.set("fields",i)},parseFields:function(e){var t=["state","status"],i=[],r=this.get("model.default_sort_column.property"),a=this.get("model.default_sort_column.direction");return i=e.map(function(e){var i={};return i.name=e,i.isSortable=e==r,i.isASC="ASC"==a,t.includes(e)?i.getValue=e+".val":i.getValue=e,i})}},s);t.register("widget:listalarm",l)}});
//# sourceMappingURL=dist/brick.map.js