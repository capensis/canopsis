Ember.Application.initializer({name:"component-timeline",after:["DataUtils","HashUtils"],initialize:function(t,e){var a=t.lookupFactory("utility:data"),o=Ember.get,c=Ember.set,n=window.moment,r=Ember.Component.extend({timelineData:void 0,statusToName:{ack:"Acknowledged by ",ackremove:"Ack removed by ",assocticket:"Ticket association by ",declareticket:"Ticket declared by ",cancel:"Canceled by ",comment:"Comment by ",uncancel:"Restored by ",statusinc:"Status increased",statusdec:"Status decreased",stateinc:"State increased",statedec:"State decreased",changestate:"State changed",snooze:"Snoozed by ",statecounter:"Cropped states (since last change of status)",hardlimit:"Hard limit reached !"},authoredName:["ack","ackremove","assocticket","declareticket","cancel","comment","uncancel","snooze"],stateArray:["Ok","Minor","Major","Critical"],statusArray:["off","ongoing","stealthy","bagot","canceled"],colorArray:["bg-green","bg-yellow","bg-orange","bg-red"],iconsAndColors:{ack:{icon:"fa-check",color:"bg-purple"},ackremove:{icon:"glyphicon glyphicon-ban-circle",color:"bg-purple"},assocticket:{icon:"fa-ticket",color:"bg-blue"},declareticket:{icon:"fa-ticket",color:"bg-blue"},cancel:{icon:"glyphicon glyphicon-trash",color:"bg-gray"},comment:{icon:"fa-comment-o",color:"bg-teal"},uncancel:{icon:"glyphicon glyphicon-share",color:"bg-gray"},statusinc:{icon:"fa-chevron-up",color:"bg-gray"},statusdec:{icon:"fa-chevron-down",color:"bg-gray"},stateinc:{icon:"fa-flag",color:void 0},statedec:{icon:"fa-flag",color:void 0},changestate:{icon:"fa-flag",color:void 0},snooze:{icon:"fa-clock-o",color:"bg-fuchsia"},statecounter:{icon:"fa-scissors",color:"bg-black"},hardlimit:{icon:"fa-warning",color:"bg-red"}},didInsertElement:function(){var t=this,e=a.getEmberApplicationSingleton().__container__.lookup("adapter:alarm"),r={entity_id:o(t,"timelineData").entity_id};e.findQuery("alarm","get-current-alarm",r).then(function(e){for(var a=void 0,r=[],i=e.data[0].value.steps.length-1;i>=0;i--){var s=e.data[0].value.steps[i],l=new Date(1e3*s.t);if(s.date=n(l).format("LL"),console.error("coucou",a,s.date),s.date!=a?s.showDate=!0:s.showDate=!1,s.time=n(l).format("h:mm:ss a"),s._t in o(t,"iconsAndColors")){if(s.color=o(t,"iconsAndColors")[s._t].color,s.icon=o(t,"iconsAndColors")[s._t].icon,s.color||(s.color=o(t,"colorArray")[s.val]),s._t.indexOf("state")>-1&&(s.state=o(t,"stateArray")[s.val]),s._t.indexOf("status")>-1&&(s.status=o(t,"statusArray")[s.val]),"snooze"===s._t){var d=new Date(1e3*s.val);s.until=n(d).format("h:mm:ss a")}if("statecounter"===s._t){s.m='<table class="table table-hover"><tbody>',s.m+="<tr><th>State increases</th><th>"+s.val.stateinc+"</th></tr>",s.m+="<tr><th>State decreases</th><th>"+s.val.statedec+"</th></tr>";for(v in s.val)if(v.startsWith("state:")){var m=parseInt(v.replace("state:",""),10),g=o(t,"stateArray")[m];s.m+="<tr><th>State "+g+"</th><th>"+s.val[v]+"</th></tr>"}s.m+="</tbody></table>"}s.name=o(t,"statusToName")[s._t],-1!=o(t,"authoredName").indexOf(s._t)&&(s.name+=s.a),r.push(s),a=s.date}else console.warning('Unknown step "'+s._t+'" : skipping')}c(t,"steps",r)},function(t){console.error("ERROR in the adapter: ",t)})}});e.register("component:component-timeline",r)}});
//# sourceMappingURL=dist/brick.map.js