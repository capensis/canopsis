Ember.Application.initializer({name:"component-timeline",after:["DataUtils","HashUtils"],initialize:function(t,e){var a=t.lookupFactory("utility:data"),o=Ember.get,c=Ember.set,n=window.moment,r=Ember.Component.extend({timelineData:void 0,statusToName:{ack:"Acknowledged by ",ackremove:"Ack removed by ",assocticket:"Ticket association by ",declareticket:"Ticket declared by ",cancel:"Canceled by ",comment:"Comment by ",uncancel:"Restored by ",statusinc:"Status increased",statusdec:"Status decreased",stateinc:"State increased",statedec:"State decreased",changestate:"State changed",snooze:"Snoozed by ",statecounter:"Cropped states (since last change of status)",hardlimit:"Hard limit reached !"},authoredName:["ack","ackremove","assocticket","declareticket","cancel","comment","uncancel","snooze"],stateArray:["Ok","Minor","Major","Critical"],statusArray:["off","ongoing","stealthy","bagot","canceled"],colorArray:["bg-green","bg-yellow","bg-orange","bg-red"],iconsAndColors:{ack:{icon:"fa-check",color:"bg-purple"},ackremove:{icon:"glyphicon glyphicon-ban-circle",color:"bg-purple"},assocticket:{icon:"fa-ticket",color:"bg-blue"},declareticket:{icon:"fa-ticket",color:"bg-blue"},cancel:{icon:"glyphicon glyphicon-trash",color:"bg-gray"},comment:{icon:"fa-comment-o",color:"bg-teal"},uncancel:{icon:"glyphicon glyphicon-share",color:"bg-gray"},statusinc:{icon:"fa-chevron-up",color:"bg-gray"},statusdec:{icon:"fa-chevron-down",color:"bg-gray"},stateinc:{icon:"fa-flag",color:void 0},statedec:{icon:"fa-flag",color:void 0},changestate:{icon:"fa-flag",color:void 0},snooze:{icon:"fa-clock-o",color:"bg-fuchsia"},statecounter:{icon:"fa-scissors",color:"bg-black"},hardlimit:{icon:"fa-warning",color:"bg-red"}},didInsertElement:function(){var t=this,e=a.getEmberApplicationSingleton().__container__.lookup("adapter:alarm"),r={entity_id:o(t,"timelineData").entity_id};e.findQuery("alarm","get-current-alarm",r).then(function(e){for(var a=[],r=e.data[0].value.steps.length-1;r>=0;r--){var i=e.data[0].value.steps[r],s=new Date(1e3*i.t);if(i.date=n(s).format("LL"),void 0!=i.date?i.showDate=!0:i.showDate=!1,i.time=n(s).format("h:mm:ss a"),i._t in o(t,"iconsAndColors")){if(i.color=o(t,"iconsAndColors")[i._t].color,i.icon=o(t,"iconsAndColors")[i._t].icon,i.color||(i.color=o(t,"colorArray")[i.val]),i._t.indexOf("state")>-1&&(i.state=o(t,"stateArray")[i.val]),i._t.indexOf("status")>-1&&(i.status=o(t,"statusArray")[i.val]),"snooze"===i._t){var l=new Date(1e3*i.val);i.until=n(l).format("h:mm:ss a")}if("statecounter"===i._t){i.m='<table class="table table-hover"><tbody>',i.m+="<tr><th>State increases</th><th>"+i.val.stateinc+"</th></tr>",i.m+="<tr><th>State decreases</th><th>"+i.val.statedec+"</th></tr>";for(v in i.val)if(v.startsWith("state:")){var d=parseInt(v.replace("state:",""),10),m=o(t,"stateArray")[d];i.m+="<tr><th>State "+m+"</th><th>"+i.val[v]+"</th></tr>"}i.m+="</tbody></table>"}i.name=o(t,"statusToName")[i._t],o(t,"authoredName").indexOf(i._t)!=-1&&(i.name+=i.a),a.push(i)}else console.warning('Unknown step "'+i._t+'" : skipping')}c(t,"steps",a)},function(t){console.error("ERROR in the adapter: ",t)})}});e.register("component:component-timeline",r)}});
//# sourceMappingURL=dist/brick.map.js