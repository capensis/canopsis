<template lang="pug">
  div
    v-data-table(
    :items="items",
    :headers="headers",
    :loading="getEventFilterRulePending"
    )
      template(slot="items", slot-scope="props")
        td {{ props.item.type }}
        td {{ props.item.pattern }}
        td {{ props.item.priority }}
        td {{ props.item.enabled }}
        td
          v-btn(@click="removeRule(props.item._id)", icon, small)
            v-icon delete
</template>

<script>
import { MODALS } from '@/constants';

import modalMixin from '@/mixins/modal/modal';
import entityEventFilterMixin from '@/mixins/entities/event-filter';

export default {
  mixins: [modalMixin, entityEventFilterMixin],
  data() {
    return {
      headers: [
        {
          text: 'Type',
          value: 'type',
        },
        {
          text: 'Pattern',
          value: 'pattern',
        },
        {
          text: 'Priority',
          value: 'priority',
        },
        {
          text: 'Enabled',
          value: 'enabled',
        },
        {
          text: 'Actions',
          sortable: false,
        },
      ],
    };
  },
  mounted() {
    this.fetchEventFilterRulesList();
  },
  methods: {
    removeRule(ruleId) {
      this.showModal({
        name: MODALS.confirmation,
        config: {
          action: () => this.removeEventFilterRule({ id: ruleId }),
        },
      });
    },
  },
};
</script>

