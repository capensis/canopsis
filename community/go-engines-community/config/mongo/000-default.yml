# Default indexes for mongo db.
# Edit this file only if changes must be published to git.
# Create new file in the config folder to add custom indexes.
# Indexes are created in canopsis db. If there is index with the same name
# this index is NOT updated.
indexes:
#  # Example
#  collection_name:
#    index_name:
#      # Field of the collection and type of the index for that field.
#      # 1 for an ascending index; -1 for descending index.
#      # https://docs.mongodb.com/manual/reference/method/db.collection.createIndex/#definition
#      keys:
#        field1: 1
#        field2: -1
#      # Options that controls the creation of the index.
#      # https://docs.mongodb.com/manual/reference/method/db.collection.createIndex/#options
#      options:
#        unique: false
#        partialFilterExpression:
#          field1:
#            $exists: true
#        sparse: false
#        expireAfterSeconds: 100
#        storageEngine:
#          wiredTiger:
#            configString: "allocation_size=4KB"
#        collation:
#          locale: fr
#          caseLevel: true
#        weights:
#          field1: 1
#        # NOTE: default_language
#        defaultLanguage: french
#        # NOTE: language_override
#        languageOverride: idioma
#        # NOTE: textIndexVersion
#        textVersion: 1
#        # NOTE: 2dsphereIndexVersion
#        sphereVersion: 2
#        bits: 26
#        min: -180
#        max: 180
#        bucketSize: 2
#        wildcardProjection:
#          _id: 1

  default_entities:
    enabled_1:
      keys:
        enabled: 1

  periodical_alarm:
    t_1:
      keys:
        t: 1
      options:
        background: true
    d_1:
      keys:
        d: 1
    v.meta_1_v.creation_date_1:
      keys:
        v.meta: 1
        v.creation_date: 1
      options:
        partialFilterExpression:
          v.meta:
            $exists: true
    v.resolved_1:
      keys:
        v.resolved: 1
    v.creation_date_1:
      keys:
        v.creation_date: 1
      options:
        background: true
    v.last_event_date_1:
      keys:
        v.last_event_date: 1
      options:
        background: true
    v.last_update_date_1:
      keys:
        v.last_update_date: 1
      options:
        background: true

  resolved_alarms:
    t_1:
      keys:
        t: 1
      options:
        background: true
    d_1:
      keys:
        d: 1
    v.meta_1_v.creation_date_1:
      keys:
        v.meta: 1
        v.creation_date: 1
      options:
        partialFilterExpression:
          v.meta:
            $exists: true
    v.creation_date_1:
      keys:
        v.creation_date: 1
      options:
        background: true
    v.last_event_date_1:
      keys:
        v.last_event_date: 1
      options:
        background: true
    v.last_update_date_1:
      keys:
        v.last_update_date: 1
      options:
        background: true
    v.resolved_1:
      keys:
        v.resolved: 1

  archived_alarms:
    v.resolved_1:
      keys:
        v.resolved: 1

  pbehavior_type:
    priority_1:
      keys:
        priority: 1
      options:
        unique: true

  junit_test_suite:
    test_suite_id_1:
      keys:
        test_suite_id: 1
    entity_id_1:
      keys:
        entity_id: 1
    filename_1:
      keys:
        filename: 1

  pbehavior:
    name:
      keys:
        name: 1
      options:
        unique: true
        background: true

  junit_test_case_media:
    relative_filepath_1:
      keys:
        relative_filepath: 1

  instruction_execution:
    instruction_1_status_1:
      keys:
        instruction: 1
        status: 1
    status_1_completed_at_1:
      keys:
        status: 1
        completed_at: 1
    alarm_1:
      keys:
        alarm: 1

  instruction_week_stats:
    instruction_1_date_1:
      keys:
        instruction: 1
        date: 1

  instruction_mod_stats:
    instruction_1_date_1:
      keys:
        instruction: 1
        date: 1

  job_history:
    job_1_status_1:
      keys:
        job: 1
        status: 1
    next_exec_1_status_1:
      keys:
        next_exec: 1
        status: 1
    execution_1:
      keys:
        execution: 1

  default_rights:
    crecord_type_1_role_1:
      keys:
        crecord_type: 1
        role: 1

  action_scenario:
    priority_1:
      keys:
        priority: 1

  entity_category:
    name_1:
      keys:
        name: 1

  idle_rule:
    priority_1:
      keys:
        priority: 1

  job_config:
    created_1:
      keys:
        created: 1

  job:
    created_1:
      keys:
        created: 1

  instruction:
    created_1:
      keys:
        created: 1

  flapping_rule:
    priority_1:
      keys:
        priority: 1

  resolve_rule:
    priority_1:
      keys:
        priority: 1
