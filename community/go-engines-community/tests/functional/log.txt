2022-01-12T17:04:42+07:00 info > should return entity pbh file="./features/engines/integration/entity_api.feature" 
2022-01-12T17:04:42+07:00 info > received event entity="test-resource-entity-api-1/test-component-entity-api-1" body={"_id":null,"ack_resources":false,"alarm_change":null,"author":"","component":"test-component-entity-api-1","connector":"test-connector-entity-api-1","connector_name":"test-connector-name-entity-api-1","current_alarm":{"_id":"aa9806ca-70f8-442c-b71b-f3cd290c55a7","d":"test-resource-entity-api-1/test-component-entity-api-1","t":1641981882,"v":{"RuleVersion":{},"activation_date":1641981882,"children":[],"component":"test-component-entity-api-1","connector":"test-connector-entity-api-1","connector_name":"test-connector-name-entity-api-1","creation_date":1641981882,"display_name":"UTJ-1WK-BNC","events_count":1,"infos":{},"initial_long_output":"","initial_output":"test-output-entity-api-1","last_event_date":1641981882,"last_update_date":1641981882,"long_output":"","long_output_history":[""],"output":"test-output-entity-api-1","parents":[],"pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"pbh_inactive_duration":0,"related_parents":null,"resource":"test-resource-entity-api-1","snooze_duration":0,"state":{"_t":"stateinc","a":"test-connector-entity-api-1.test-connector-name-entity-api-1","m":"test-output-entity-api-1","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},"status":{"_t":"statusinc","a":"test-connector-entity-api-1.test-connector-name-entity-api-1","m":"test-output-entity-api-1","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},"steps":[{"_t":"stateinc","a":"test-connector-entity-api-1.test-connector-name-entity-api-1","m":"test-output-entity-api-1","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},{"_t":"statusinc","a":"test-connector-entity-api-1.test-connector-name-entity-api-1","m":"test-output-entity-api-1","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1}],"tags":[],"total_state_changes":1}},"current_entity":null,"debug":false,"duration":0,"event_type":"","execution_time":0,"extra":null,"initiator":"","long_output":"","ma_children":[],"ma_parents":[],"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-1","routing_key":"","source_type":"","stat_name":"","state":0,"state_type":null,"status":null,"ticket":"","timestamp":-62135596800,"user_id":""} event_type="" 
2022-01-12T17:04:42+07:00 info > received event event_type="" entity="test-resource-entity-api-1/test-component-entity-api-1" body={"_id":null,"ack_resources":false,"alarm_change":null,"author":"","component":"test-component-entity-api-1","connector":"test-connector-entity-api-1","connector_name":"test-connector-name-entity-api-1","current_alarm":{"_id":"aa9806ca-70f8-442c-b71b-f3cd290c55a7","d":"test-resource-entity-api-1/test-component-entity-api-1","t":1641981882,"v":{"RuleVersion":{},"activation_date":1641981882,"children":[],"component":"test-component-entity-api-1","connector":"test-connector-entity-api-1","connector_name":"test-connector-name-entity-api-1","creation_date":1641981882,"display_name":"UTJ-1WK-BNC","events_count":1,"infos":{},"initial_long_output":"","initial_output":"test-output-entity-api-1","last_event_date":1641981882,"last_update_date":1641981882,"long_output":"","long_output_history":[""],"output":"test-output-entity-api-1","parents":[],"pbehavior_info":{"canonical_type":"maintenance","id":"e1364c8f-e0f1-4dde-ac2b-9e796bc32483","name":"test-pbehavior-entity-api-1","reason":"test-reason-1-name","timestamp":1641981882,"type":"test-default-maintenance-type","type_name":"Default Type Maintenance"},"pbh_inactive_duration":0,"related_parents":null,"resource":"test-resource-entity-api-1","snooze_duration":0,"state":{"_t":"stateinc","a":"test-connector-entity-api-1.test-connector-name-entity-api-1","m":"test-output-entity-api-1","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},"status":{"_t":"statusinc","a":"test-connector-entity-api-1.test-connector-name-entity-api-1","m":"test-output-entity-api-1","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},"steps":[{"_t":"stateinc","a":"test-connector-entity-api-1.test-connector-name-entity-api-1","m":"test-output-entity-api-1","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},{"_t":"statusinc","a":"test-connector-entity-api-1.test-connector-name-entity-api-1","m":"test-output-entity-api-1","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},{"_t":"pbhenter","a":"system","initiator":"system","m":"Pbehavior test-pbehavior-entity-api-1. Type: Default Type Maintenance. Reason: test-reason-1-name.","pbehavior_canonical_type":"maintenance","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":0}],"tags":[],"total_state_changes":1}},"current_entity":null,"debug":false,"duration":0,"event_type":"","execution_time":0,"extra":null,"initiator":"","long_output":"","ma_children":[],"ma_parents":[],"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-1","routing_key":"","source_type":"","stat_name":"","state":0,"state_type":null,"status":null,"ticket":"","timestamp":-62135596800,"user_id":""} 
2022-01-12T17:04:42+07:00 info > shouldn return entity last event date file="./features/engines/integration/entity_api.feature" 
2022-01-12T17:04:42+07:00 info > received event event_type="check" entity="test-resource-entity-api-2/test-component-entity-api-2" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981882,"PreviousStatus":0,"PreviousStatusChange":1641981882,"Type":""},"author":"root","component":"test-component-entity-api-2","connector":"test-connector-entity-api-2","connector_name":"test-connector-name-entity-api-2","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-2/test-component-entity-api-2","category":"","component":"test-component-entity-api-2","created":1641981882,"depends":["test-connector-entity-api-2/test-connector-name-entity-api-2"],"description":"","enable_history":[1641981882],"enabled":true,"impact":["test-component-entity-api-2"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981882,"measurements":null,"name":"test-resource-entity-api-2","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-2","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-2","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981882,"user_id":"root"} 
2022-01-12T17:04:42+07:00 info > should cound ko and ok events file="./features/engines/integration/entity_api.feature" 
2022-01-12T17:04:42+07:00 info > received event entity="test-resource-entity-api-3/test-component-entity-api-3" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981882,"PreviousStatus":0,"PreviousStatusChange":1641981882,"Type":""},"author":"root","component":"test-component-entity-api-3","connector":"test-connector-entity-api-3","connector_name":"test-connector-name-entity-api-3","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-3/test-component-entity-api-3","category":"","component":"test-component-entity-api-3","created":1641981882,"depends":["test-connector-entity-api-3/test-connector-name-entity-api-3"],"description":"","enable_history":[1641981882],"enabled":true,"impact":["test-component-entity-api-3"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981882,"measurements":null,"name":"test-resource-entity-api-3","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-3","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-3","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981882,"user_id":"root"} event_type="check" 
2022-01-12T17:04:43+07:00 info > received event event_type="check" entity="test-resource-entity-api-3/test-component-entity-api-3" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981882,"PreviousStatus":0,"PreviousStatusChange":1641981882,"Type":""},"author":"root","component":"test-component-entity-api-3","connector":"test-connector-entity-api-3","connector_name":"test-connector-name-entity-api-3","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-3/test-component-entity-api-3","category":"","component":"test-component-entity-api-3","created":1641981882,"depends":["test-connector-entity-api-3/test-connector-name-entity-api-3"],"description":"","enable_history":[1641981882],"enabled":true,"impact":["test-component-entity-api-3"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981882,"measurements":null,"name":"test-resource-entity-api-3","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-3","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-3","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981882,"user_id":"root"} 
2022-01-12T17:04:43+07:00 info > received event event_type="check" entity="test-resource-entity-api-3/test-component-entity-api-3" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981882,"PreviousStatus":0,"PreviousStatusChange":1641981882,"Type":""},"author":"root","component":"test-component-entity-api-3","connector":"test-connector-entity-api-3","connector_name":"test-connector-name-entity-api-3","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-3/test-component-entity-api-3","category":"","component":"test-component-entity-api-3","created":1641981882,"depends":["test-connector-entity-api-3/test-connector-name-entity-api-3"],"description":"","enable_history":[1641981882],"enabled":true,"impact":["test-component-entity-api-3"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981883,"measurements":null,"name":"test-resource-entity-api-3","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-3","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-3","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981882,"user_id":"root"} 
2022-01-12T17:04:43+07:00 info > received event event_type="check" entity="test-resource-entity-api-3/test-component-entity-api-3" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981882,"PreviousStatus":0,"PreviousStatusChange":1641981882,"Type":""},"author":"root","component":"test-component-entity-api-3","connector":"test-connector-entity-api-3","connector_name":"test-connector-name-entity-api-3","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-3/test-component-entity-api-3","category":"","component":"test-component-entity-api-3","created":1641981882,"depends":["test-connector-entity-api-3/test-connector-name-entity-api-3"],"description":"","enable_history":[1641981882],"enabled":true,"impact":["test-component-entity-api-3"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981883,"measurements":null,"name":"test-resource-entity-api-3","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-3","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-3","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981882,"user_id":"root"} 
2022-01-12T17:04:43+07:00 info > received event event_type="" entity="test-resource-entity-api-3/test-component-entity-api-3" body={"_id":null,"ack_resources":false,"alarm_change":null,"author":"","component":"test-component-entity-api-3","connector":"test-connector-entity-api-3","connector_name":"test-connector-name-entity-api-3","current_alarm":{"_id":"98153246-6e4f-4433-a480-9e6a7c8644b0","d":"test-resource-entity-api-3/test-component-entity-api-3","t":1641981883,"v":{"RuleVersion":{},"activation_date":1641981883,"children":[],"component":"test-component-entity-api-3","connector":"test-connector-entity-api-3","connector_name":"test-connector-name-entity-api-3","creation_date":1641981883,"display_name":"ZOK-E3R-TQ3","events_count":1,"infos":{},"initial_long_output":"","initial_output":"test-output-entity-api-3","last_event_date":1641981883,"last_update_date":1641981882,"long_output":"","long_output_history":[""],"output":"test-output-entity-api-3","parents":[],"pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"pbh_inactive_duration":0,"related_parents":null,"resource":"test-resource-entity-api-3","snooze_duration":0,"state":{"_t":"stateinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},"status":{"_t":"statusinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},"steps":[{"_t":"stateinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},{"_t":"statusinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1}],"tags":[],"total_state_changes":1}},"current_entity":null,"debug":false,"duration":0,"event_type":"","execution_time":0,"extra":null,"initiator":"","long_output":"","ma_children":[],"ma_parents":[],"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-3","routing_key":"","source_type":"","stat_name":"","state":0,"state_type":null,"status":null,"ticket":"","timestamp":-62135596800,"user_id":""} 
2022-01-12T17:04:43+07:00 info > received event entity="test-resource-entity-api-3/test-component-entity-api-3" body={"_id":null,"ack_resources":false,"alarm_change":null,"author":"","component":"test-component-entity-api-3","connector":"test-connector-entity-api-3","connector_name":"test-connector-name-entity-api-3","current_alarm":{"_id":"98153246-6e4f-4433-a480-9e6a7c8644b0","d":"test-resource-entity-api-3/test-component-entity-api-3","t":1641981883,"v":{"RuleVersion":{},"activation_date":1641981883,"children":[],"component":"test-component-entity-api-3","connector":"test-connector-entity-api-3","connector_name":"test-connector-name-entity-api-3","creation_date":1641981883,"display_name":"ZOK-E3R-TQ3","events_count":2,"infos":{},"initial_long_output":"","initial_output":"test-output-entity-api-3","last_event_date":1641981882,"last_update_date":1641981882,"long_output":"","long_output_history":[""],"output":"test-output-entity-api-3","parents":[],"pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"pbh_inactive_duration":0,"related_parents":null,"resource":"test-resource-entity-api-3","snooze_duration":0,"state":{"_t":"stateinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":2},"state_changes_since_status_update":1,"status":{"_t":"statusinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},"steps":[{"_t":"stateinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},{"_t":"statusinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},{"_t":"stateinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":2}],"tags":[],"total_state_changes":2}},"current_entity":null,"debug":false,"duration":0,"event_type":"","execution_time":0,"extra":null,"initiator":"","long_output":"","ma_children":[],"ma_parents":[],"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-3","routing_key":"","source_type":"","stat_name":"","state":0,"state_type":null,"status":null,"ticket":"","timestamp":-62135596800,"user_id":""} event_type="" 
2022-01-12T17:04:43+07:00 info > received event event_type="" entity="test-resource-entity-api-3/test-component-entity-api-3" body={"_id":null,"ack_resources":false,"alarm_change":null,"author":"","component":"test-component-entity-api-3","connector":"test-connector-entity-api-3","connector_name":"test-connector-name-entity-api-3","current_alarm":{"_id":"98153246-6e4f-4433-a480-9e6a7c8644b0","d":"test-resource-entity-api-3/test-component-entity-api-3","t":1641981883,"v":{"RuleVersion":{},"activation_date":1641981883,"children":[],"component":"test-component-entity-api-3","connector":"test-connector-entity-api-3","connector_name":"test-connector-name-entity-api-3","creation_date":1641981883,"display_name":"ZOK-E3R-TQ3","events_count":3,"infos":{},"initial_long_output":"","initial_output":"test-output-entity-api-3","last_event_date":1641981882,"last_update_date":1641981882,"long_output":"","long_output_history":[""],"output":"test-output-entity-api-3","parents":[],"pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"pbh_inactive_duration":0,"related_parents":null,"resource":"test-resource-entity-api-3","snooze_duration":0,"state":{"_t":"stateinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":3},"state_changes_since_status_update":2,"status":{"_t":"statusinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},"steps":[{"_t":"stateinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},{"_t":"statusinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":1},{"_t":"stateinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":2},{"_t":"stateinc","a":"test-connector-entity-api-3.test-connector-name-entity-api-3","m":"test-output-entity-api-3","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981882,"val":3}],"tags":[],"total_state_changes":3}},"current_entity":null,"debug":false,"duration":0,"event_type":"","execution_time":0,"extra":null,"initiator":"","long_output":"","ma_children":[],"ma_parents":[],"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-3","routing_key":"","source_type":"","stat_name":"","state":0,"state_type":null,"status":null,"ticket":"","timestamp":-62135596800,"user_id":""} 
2022-01-12T17:04:43+07:00 info > shouldn't count statistic if an entity is in inactive pbh state file="./features/engines/integration/entity_api.feature" 
2022-01-12T17:04:43+07:00 info > received event event_type="check" entity="test-resource-entity-api-4/test-component-entity-api-4" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981883,"PreviousStatus":0,"PreviousStatusChange":1641981883,"Type":""},"author":"root","component":"test-component-entity-api-4","connector":"test-connector-entity-api-4","connector_name":"test-connector-name-entity-api-4","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-4/test-component-entity-api-4","category":"","component":"test-component-entity-api-4","created":1641981883,"depends":["test-connector-entity-api-4/test-connector-name-entity-api-4"],"description":"","enable_history":[1641981883],"enabled":true,"impact":["test-component-entity-api-4"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981883,"measurements":null,"name":"test-resource-entity-api-4","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-4","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-4","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981883,"user_id":"root"} 
2022-01-12T17:04:43+07:00 info > received event event_type="check" entity="test-resource-entity-api-4/test-component-entity-api-4" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981883,"PreviousStatus":0,"PreviousStatusChange":1641981883,"Type":""},"author":"root","component":"test-component-entity-api-4","connector":"test-connector-entity-api-4","connector_name":"test-connector-name-entity-api-4","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-4/test-component-entity-api-4","category":"","component":"test-component-entity-api-4","created":1641981883,"depends":["test-connector-entity-api-4/test-connector-name-entity-api-4"],"description":"","enable_history":[1641981883],"enabled":true,"impact":["test-component-entity-api-4"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981883,"measurements":null,"name":"test-resource-entity-api-4","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-4","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-4","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981883,"user_id":"root"} 
2022-01-12T17:04:43+07:00 info > received event event_type="check" entity="test-resource-entity-api-4/test-component-entity-api-4" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981883,"PreviousStatus":0,"PreviousStatusChange":1641981883,"Type":""},"author":"root","component":"test-component-entity-api-4","connector":"test-connector-entity-api-4","connector_name":"test-connector-name-entity-api-4","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-4/test-component-entity-api-4","category":"","component":"test-component-entity-api-4","created":1641981883,"depends":["test-connector-entity-api-4/test-connector-name-entity-api-4"],"description":"","enable_history":[1641981883],"enabled":true,"impact":["test-component-entity-api-4"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981883,"measurements":null,"name":"test-resource-entity-api-4","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-4","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-4","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981883,"user_id":"root"} 
2022-01-12T17:04:43+07:00 info > received event event_type="pbhenter" entity="test-resource-entity-api-4/test-component-entity-api-4" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981883,"PreviousStatus":0,"PreviousStatusChange":1641981883,"Type":"pbhenter"},"author":"","component":"test-component-entity-api-4","connector":"test-connector-entity-api-4","connector_name":"test-connector-name-entity-api-4","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-4/test-component-entity-api-4","category":"","component":"test-component-entity-api-4","created":1641981883,"depends":["test-connector-entity-api-4/test-connector-name-entity-api-4"],"description":"","enable_history":[1641981883],"enabled":true,"impact":["test-component-entity-api-4"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981883,"measurements":null,"name":"test-resource-entity-api-4","pbehavior_info":{"canonical_type":"inactive","id":"bd369c11-1088-4bec-80b7-62e5bdb071c0","name":"test-pbehavior-entity-api-4","reason":"test-reason-1-name","timestamp":1641981883,"type":"test-default-inactive-type","type_name":"Default Type Inactive"},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"pbhenter","execution_time":0,"extra":{},"initiator":"system","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"Pbehavior test-pbehavior-entity-api-4. Type: Default Type Inactive. Reason: test-reason-1-name.","pbehavior_info":{"canonical_type":"inactive","id":"bd369c11-1088-4bec-80b7-62e5bdb071c0","name":"test-pbehavior-entity-api-4","reason":"test-reason-1-name","timestamp":1641981883,"type":"test-default-inactive-type","type_name":"Default Type Inactive"},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-4","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981883,"user_id":""} 
2022-01-12T17:04:43+07:00 info > received event event_type="check" entity="test-resource-entity-api-4/test-component-entity-api-4" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981883,"PreviousStatus":0,"PreviousStatusChange":1641981883,"Type":""},"author":"root","component":"test-component-entity-api-4","connector":"test-connector-entity-api-4","connector_name":"test-connector-name-entity-api-4","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-4/test-component-entity-api-4","category":"","component":"test-component-entity-api-4","created":1641981883,"depends":["test-connector-entity-api-4/test-connector-name-entity-api-4"],"description":"","enable_history":[1641981883],"enabled":true,"impact":["test-component-entity-api-4"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981883,"measurements":null,"name":"test-resource-entity-api-4","pbehavior_info":{"canonical_type":"inactive","id":"bd369c11-1088-4bec-80b7-62e5bdb071c0","name":"test-pbehavior-entity-api-4","reason":"test-reason-1-name","timestamp":1641981883,"type":"test-default-inactive-type","type_name":"Default Type Inactive"},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-4","pbehavior_info":{"canonical_type":"inactive","id":"bd369c11-1088-4bec-80b7-62e5bdb071c0","name":"test-pbehavior-entity-api-4","reason":"test-reason-1-name","timestamp":1641981883,"type":"test-default-inactive-type","type_name":"Default Type Inactive"},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-4","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981883,"user_id":"root"} 
2022-01-12T17:04:43+07:00 info > received event body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981883,"PreviousStatus":0,"PreviousStatusChange":1641981883,"Type":""},"author":"root","component":"test-component-entity-api-4","connector":"test-connector-entity-api-4","connector_name":"test-connector-name-entity-api-4","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-4/test-component-entity-api-4","category":"","component":"test-component-entity-api-4","created":1641981883,"depends":["test-connector-entity-api-4/test-connector-name-entity-api-4"],"description":"","enable_history":[1641981883],"enabled":true,"impact":["test-component-entity-api-4"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981883,"measurements":null,"name":"test-resource-entity-api-4","pbehavior_info":{"canonical_type":"inactive","id":"bd369c11-1088-4bec-80b7-62e5bdb071c0","name":"test-pbehavior-entity-api-4","reason":"test-reason-1-name","timestamp":1641981883,"type":"test-default-inactive-type","type_name":"Default Type Inactive"},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-4","pbehavior_info":{"canonical_type":"inactive","id":"bd369c11-1088-4bec-80b7-62e5bdb071c0","name":"test-pbehavior-entity-api-4","reason":"test-reason-1-name","timestamp":1641981883,"type":"test-default-inactive-type","type_name":"Default Type Inactive"},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-4","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981883,"user_id":"root"} event_type="check" entity="test-resource-entity-api-4/test-component-entity-api-4" 
2022-01-12T17:04:43+07:00 info > received event event_type="" entity="test-resource-entity-api-4/test-component-entity-api-4" body={"_id":null,"ack_resources":false,"alarm_change":null,"author":"","component":"test-component-entity-api-4","connector":"test-connector-entity-api-4","connector_name":"test-connector-name-entity-api-4","current_alarm":{"_id":"d3a7d344-0150-458c-9a3e-adfb5dcb4cac","d":"test-resource-entity-api-4/test-component-entity-api-4","t":1641981883,"v":{"RuleVersion":{},"children":[],"component":"test-component-entity-api-4","connector":"test-connector-entity-api-4","connector_name":"test-connector-name-entity-api-4","creation_date":1641981883,"display_name":"FG2-KFN-XAK","events_count":1,"infos":{},"initial_long_output":"","initial_output":"test-output-entity-api-4","last_event_date":1641981883,"last_update_date":1641981883,"long_output":"","long_output_history":[""],"output":"test-output-entity-api-4","parents":[],"pbehavior_info":{"canonical_type":"inactive","id":"bd369c11-1088-4bec-80b7-62e5bdb071c0","name":"test-pbehavior-entity-api-4","reason":"test-reason-1-name","timestamp":1641981883,"type":"test-default-inactive-type","type_name":"Default Type Inactive"},"pbh_inactive_duration":0,"related_parents":null,"resource":"test-resource-entity-api-4","snooze_duration":0,"state":{"_t":"stateinc","a":"test-connector-entity-api-4.test-connector-name-entity-api-4","m":"test-output-entity-api-4","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981883,"val":1},"status":{"_t":"statusinc","a":"test-connector-entity-api-4.test-connector-name-entity-api-4","m":"test-output-entity-api-4","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981883,"val":1},"steps":[{"_t":"stateinc","a":"test-connector-entity-api-4.test-connector-name-entity-api-4","m":"test-output-entity-api-4","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981883,"val":1},{"_t":"statusinc","a":"test-connector-entity-api-4.test-connector-name-entity-api-4","m":"test-output-entity-api-4","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981883,"val":1},{"_t":"pbhenter","a":"root","initiator":"external","m":"Pbehavior test-pbehavior-entity-api-4. Type: Default Type Inactive. Reason: test-reason-1-name.","pbehavior_canonical_type":"inactive","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981883,"user_id":"root","val":0}],"tags":[],"total_state_changes":1}},"current_entity":null,"debug":false,"duration":0,"event_type":"","execution_time":0,"extra":null,"initiator":"","long_output":"","ma_children":[],"ma_parents":[],"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-4","routing_key":"","source_type":"","stat_name":"","state":0,"state_type":null,"status":null,"ticket":"","timestamp":-62135596800,"user_id":""} 
2022-01-12T17:04:43+07:00 info > shouldn count statistic if entity in not inactive pbh state file="./features/engines/integration/entity_api.feature" 
2022-01-12T17:04:44+07:00 info > received event body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981883,"PreviousStatus":0,"PreviousStatusChange":1641981883,"Type":""},"author":"root","component":"test-component-entity-api-5","connector":"test-connector-entity-api-5","connector_name":"test-connector-name-entity-api-5","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-5/test-component-entity-api-5","category":"","component":"test-component-entity-api-5","created":1641981883,"depends":["test-connector-entity-api-5/test-connector-name-entity-api-5"],"description":"","enable_history":[1641981883],"enabled":true,"impact":["test-component-entity-api-5"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981883,"measurements":null,"name":"test-resource-entity-api-5","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-5","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-5","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981883,"user_id":"root"} event_type="check" entity="test-resource-entity-api-5/test-component-entity-api-5" 
2022-01-12T17:04:44+07:00 info > received event event_type="check" entity="test-resource-entity-api-5/test-component-entity-api-5" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981883,"PreviousStatus":0,"PreviousStatusChange":1641981883,"Type":""},"author":"root","component":"test-component-entity-api-5","connector":"test-connector-entity-api-5","connector_name":"test-connector-name-entity-api-5","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-5/test-component-entity-api-5","category":"","component":"test-component-entity-api-5","created":1641981883,"depends":["test-connector-entity-api-5/test-connector-name-entity-api-5"],"description":"","enable_history":[1641981883],"enabled":true,"impact":["test-component-entity-api-5"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981884,"measurements":null,"name":"test-resource-entity-api-5","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-5","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-5","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981883,"user_id":"root"} 
2022-01-12T17:04:44+07:00 info > received event event_type="check" entity="test-resource-entity-api-5/test-component-entity-api-5" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981883,"PreviousStatus":0,"PreviousStatusChange":1641981883,"Type":""},"author":"root","component":"test-component-entity-api-5","connector":"test-connector-entity-api-5","connector_name":"test-connector-name-entity-api-5","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-5/test-component-entity-api-5","category":"","component":"test-component-entity-api-5","created":1641981883,"depends":["test-connector-entity-api-5/test-connector-name-entity-api-5"],"description":"","enable_history":[1641981883],"enabled":true,"impact":["test-component-entity-api-5"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981884,"measurements":null,"name":"test-resource-entity-api-5","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-5","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-5","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981883,"user_id":"root"} 
2022-01-12T17:04:44+07:00 info > received event event_type="pbhenter" entity="test-resource-entity-api-5/test-component-entity-api-5" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981884,"PreviousStatus":0,"PreviousStatusChange":1641981884,"Type":"pbhenter"},"author":"","component":"test-component-entity-api-5","connector":"test-connector-entity-api-5","connector_name":"test-connector-name-entity-api-5","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-5/test-component-entity-api-5","category":"","component":"test-component-entity-api-5","created":1641981883,"depends":["test-connector-entity-api-5/test-connector-name-entity-api-5"],"description":"","enable_history":[1641981883],"enabled":true,"impact":["test-component-entity-api-5"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981884,"measurements":null,"name":"test-resource-entity-api-5","pbehavior_info":{"canonical_type":"maintenance","id":"eaf88b40-8c56-43e7-b69a-916a75fe7f84","name":"test-pbehavior-entity-api-5","reason":"test-reason-1-name","timestamp":1641981884,"type":"test-default-maintenance-type","type_name":"Default Type Maintenance"},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"pbhenter","execution_time":0,"extra":{},"initiator":"system","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"Pbehavior test-pbehavior-entity-api-5. Type: Default Type Maintenance. Reason: test-reason-1-name.","pbehavior_info":{"canonical_type":"maintenance","id":"eaf88b40-8c56-43e7-b69a-916a75fe7f84","name":"test-pbehavior-entity-api-5","reason":"test-reason-1-name","timestamp":1641981884,"type":"test-default-maintenance-type","type_name":"Default Type Maintenance"},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-5","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981884,"user_id":""} 
2022-01-12T17:04:44+07:00 info > received event event_type="check" entity="test-resource-entity-api-5/test-component-entity-api-5" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981884,"PreviousStatus":0,"PreviousStatusChange":1641981884,"Type":""},"author":"root","component":"test-component-entity-api-5","connector":"test-connector-entity-api-5","connector_name":"test-connector-name-entity-api-5","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-5/test-component-entity-api-5","category":"","component":"test-component-entity-api-5","created":1641981883,"depends":["test-connector-entity-api-5/test-connector-name-entity-api-5"],"description":"","enable_history":[1641981883],"enabled":true,"impact":["test-component-entity-api-5"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981884,"measurements":null,"name":"test-resource-entity-api-5","pbehavior_info":{"canonical_type":"maintenance","id":"eaf88b40-8c56-43e7-b69a-916a75fe7f84","name":"test-pbehavior-entity-api-5","reason":"test-reason-1-name","timestamp":1641981884,"type":"test-default-maintenance-type","type_name":"Default Type Maintenance"},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-5","pbehavior_info":{"canonical_type":"maintenance","id":"eaf88b40-8c56-43e7-b69a-916a75fe7f84","name":"test-pbehavior-entity-api-5","reason":"test-reason-1-name","timestamp":1641981884,"type":"test-default-maintenance-type","type_name":"Default Type Maintenance"},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-5","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981884,"user_id":"root"} 
2022-01-12T17:04:44+07:00 info > received event event_type="check" entity="test-resource-entity-api-5/test-component-entity-api-5" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981884,"PreviousStatus":0,"PreviousStatusChange":1641981884,"Type":""},"author":"root","component":"test-component-entity-api-5","connector":"test-connector-entity-api-5","connector_name":"test-connector-name-entity-api-5","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-5/test-component-entity-api-5","category":"","component":"test-component-entity-api-5","created":1641981883,"depends":["test-connector-entity-api-5/test-connector-name-entity-api-5"],"description":"","enable_history":[1641981883],"enabled":true,"impact":["test-component-entity-api-5"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981884,"measurements":null,"name":"test-resource-entity-api-5","pbehavior_info":{"canonical_type":"maintenance","id":"eaf88b40-8c56-43e7-b69a-916a75fe7f84","name":"test-pbehavior-entity-api-5","reason":"test-reason-1-name","timestamp":1641981884,"type":"test-default-maintenance-type","type_name":"Default Type Maintenance"},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-5","pbehavior_info":{"canonical_type":"maintenance","id":"eaf88b40-8c56-43e7-b69a-916a75fe7f84","name":"test-pbehavior-entity-api-5","reason":"test-reason-1-name","timestamp":1641981884,"type":"test-default-maintenance-type","type_name":"Default Type Maintenance"},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-5","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981884,"user_id":"root"} 
2022-01-12T17:04:44+07:00 info > received event event_type="" entity="test-resource-entity-api-5/test-component-entity-api-5" body={"_id":null,"ack_resources":false,"alarm_change":null,"author":"","component":"test-component-entity-api-5","connector":"test-connector-entity-api-5","connector_name":"test-connector-name-entity-api-5","current_alarm":{"_id":"acd2ffc5-e302-491a-acc8-7b14581454f6","d":"test-resource-entity-api-5/test-component-entity-api-5","t":1641981884,"v":{"RuleVersion":{},"children":[],"component":"test-component-entity-api-5","connector":"test-connector-entity-api-5","connector_name":"test-connector-name-entity-api-5","creation_date":1641981884,"display_name":"GZD-4SD-7HV","events_count":1,"infos":{},"initial_long_output":"","initial_output":"test-output-entity-api-5","last_event_date":1641981884,"last_update_date":1641981884,"long_output":"","long_output_history":[""],"output":"test-output-entity-api-5","parents":[],"pbehavior_info":{"canonical_type":"maintenance","id":"eaf88b40-8c56-43e7-b69a-916a75fe7f84","name":"test-pbehavior-entity-api-5","reason":"test-reason-1-name","timestamp":1641981884,"type":"test-default-maintenance-type","type_name":"Default Type Maintenance"},"pbh_inactive_duration":0,"related_parents":null,"resource":"test-resource-entity-api-5","snooze_duration":0,"state":{"_t":"stateinc","a":"test-connector-entity-api-5.test-connector-name-entity-api-5","m":"test-output-entity-api-5","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981884,"val":1},"status":{"_t":"statusinc","a":"test-connector-entity-api-5.test-connector-name-entity-api-5","m":"test-output-entity-api-5","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981884,"val":1},"steps":[{"_t":"stateinc","a":"test-connector-entity-api-5.test-connector-name-entity-api-5","m":"test-output-entity-api-5","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981884,"val":1},{"_t":"statusinc","a":"test-connector-entity-api-5.test-connector-name-entity-api-5","m":"test-output-entity-api-5","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981884,"val":1},{"_t":"pbhenter","a":"root","initiator":"external","m":"Pbehavior test-pbehavior-entity-api-5. Type: Default Type Maintenance. Reason: test-reason-1-name.","pbehavior_canonical_type":"maintenance","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981884,"user_id":"root","val":0}],"tags":[],"total_state_changes":1}},"current_entity":null,"debug":false,"duration":0,"event_type":"","execution_time":0,"extra":null,"initiator":"","long_output":"","ma_children":[],"ma_parents":[],"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-5","routing_key":"","source_type":"","stat_name":"","state":0,"state_type":null,"status":null,"ticket":"","timestamp":-62135596800,"user_id":""} 
2022-01-12T17:04:44+07:00 info > should return corresponding alarm's state file="./features/engines/integration/entity_api.feature" 
2022-01-12T17:04:44+07:00 info > received event event_type="check" entity="test-resource-entity-api-7/test-component-entity-api-7" body={"_id":null,"ack_resources":false,"alarm_change":{"PreviousPbehaviorCannonicalType":"","PreviousPbehaviorTypeID":"","PreviousState":0,"PreviousStateChange":1641981884,"PreviousStatus":0,"PreviousStatusChange":1641981884,"Type":""},"author":"root","component":"test-component-entity-api-7","connector":"test-connector-entity-api-7","connector_name":"test-connector-name-entity-api-7","current_alarm":null,"current_entity":{"_id":"test-resource-entity-api-7/test-component-entity-api-7","category":"","component":"test-component-entity-api-7","created":1641981884,"depends":["test-connector-entity-api-7/test-connector-name-entity-api-7"],"description":"","enable_history":[1641981884],"enabled":true,"impact":["test-component-entity-api-7"],"impact_level":1,"import_source":"","imported":null,"infos":{},"last_event_date":1641981884,"measurements":null,"name":"test-resource-entity-api-7","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"sli_avail_state":0,"type":"resource"},"debug":false,"duration":0,"event_type":"check","execution_time":0,"extra":{},"initiator":"external","long_output":"","ma_children":null,"ma_parents":null,"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"test-output-entity-api-7","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-7","routing_key":"","source_type":"resource","stat_name":"","state":0,"state_type":1,"status":null,"ticket":"","timestamp":1641981884,"user_id":"root"} 
2022-01-12T17:04:44+07:00 info > received event event_type="" entity="test-resource-entity-api-6/test-component-entity-api-6" body={"_id":null,"ack_resources":false,"alarm_change":null,"author":"","component":"test-component-entity-api-6","connector":"test-connector-entity-api-6","connector_name":"test-connector-name-entity-api-6","current_alarm":{"_id":"5973ae1c-03cd-43e9-9148-e117998d82f3","d":"test-resource-entity-api-6/test-component-entity-api-6","t":1641981884,"v":{"RuleVersion":{},"activation_date":1641981884,"children":[],"component":"test-component-entity-api-6","connector":"test-connector-entity-api-6","connector_name":"test-connector-name-entity-api-6","creation_date":1641981884,"display_name":"C7D-QQS-SB2","events_count":1,"infos":{},"initial_long_output":"","initial_output":"test-output-entity-api-6","last_event_date":1641981884,"last_update_date":1641981884,"long_output":"","long_output_history":[""],"output":"test-output-entity-api-6","parents":[],"pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"pbh_inactive_duration":0,"related_parents":null,"resource":"test-resource-entity-api-6","snooze_duration":0,"state":{"_t":"stateinc","a":"test-connector-entity-api-6.test-connector-name-entity-api-6","m":"test-output-entity-api-6","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981884,"val":2},"status":{"_t":"statusinc","a":"test-connector-entity-api-6.test-connector-name-entity-api-6","m":"test-output-entity-api-6","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981884,"val":1},"steps":[{"_t":"stateinc","a":"test-connector-entity-api-6.test-connector-name-entity-api-6","m":"test-output-entity-api-6","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981884,"val":2},{"_t":"statusinc","a":"test-connector-entity-api-6.test-connector-name-entity-api-6","m":"test-output-entity-api-6","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981884,"val":1}],"tags":[],"total_state_changes":1}},"current_entity":null,"debug":false,"duration":0,"event_type":"","execution_time":0,"extra":null,"initiator":"","long_output":"","ma_children":[],"ma_parents":[],"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-6","routing_key":"","source_type":"","stat_name":"","state":0,"state_type":null,"status":null,"ticket":"","timestamp":-62135596800,"user_id":""} 
2022-01-12T17:04:44+07:00 info > old statistics shouldn't be returned file="./features/engines/integration/entity_api.feature" 
2022-01-12T17:04:44+07:00 info > next day statistic should remove old one file="./features/engines/integration/entity_api.feature" 
2022-01-12T17:04:44+07:00 info > received event event_type="" entity="test-resource-entity-api-9/test-component-entity-api-9" body={"_id":null,"ack_resources":false,"alarm_change":null,"author":"","component":"test-component-entity-api-9","connector":"test-connector-entity-api-9","connector_name":"test-connector-name-entity-api-9","current_alarm":{"_id":"4c1170de-db43-46fd-8fa3-8cd4a4c16413","d":"test-resource-entity-api-9/test-component-entity-api-9","t":1641981884,"v":{"RuleVersion":{},"activation_date":1641981884,"children":[],"component":"test-component-entity-api-9","connector":"test-connector-entity-api-9","connector_name":"test-connector-name-entity-api-9","creation_date":1641981884,"display_name":"KXT-QZS-4YA","events_count":1,"infos":{},"initial_long_output":"","initial_output":"test-output-entity-api-9","last_event_date":1641981884,"last_update_date":1641981874,"long_output":"","long_output_history":[""],"output":"test-output-entity-api-9","parents":[],"pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"pbh_inactive_duration":0,"related_parents":null,"resource":"test-resource-entity-api-9","snooze_duration":0,"state":{"_t":"stateinc","a":"test-connector-entity-api-9.test-connector-name-entity-api-9","m":"test-output-entity-api-9","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981874,"val":2},"status":{"_t":"statusinc","a":"test-connector-entity-api-9.test-connector-name-entity-api-9","m":"test-output-entity-api-9","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981874,"val":1},"steps":[{"_t":"stateinc","a":"test-connector-entity-api-9.test-connector-name-entity-api-9","m":"test-output-entity-api-9","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981874,"val":2},{"_t":"statusinc","a":"test-connector-entity-api-9.test-connector-name-entity-api-9","m":"test-output-entity-api-9","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981874,"val":1}],"tags":[],"total_state_changes":1}},"current_entity":null,"debug":false,"duration":0,"event_type":"","execution_time":0,"extra":null,"initiator":"","long_output":"","ma_children":[],"ma_parents":[],"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-9","routing_key":"","source_type":"","stat_name":"","state":0,"state_type":null,"status":null,"ticket":"","timestamp":-62135596800,"user_id":""} 
2022-01-12T17:04:45+07:00 info > received event event_type="" entity="test-resource-entity-api-9/test-component-entity-api-9" body={"_id":null,"ack_resources":false,"alarm_change":null,"author":"","component":"test-component-entity-api-9","connector":"test-connector-entity-api-9","connector_name":"test-connector-name-entity-api-9","current_alarm":{"_id":"4c1170de-db43-46fd-8fa3-8cd4a4c16413","d":"test-resource-entity-api-9/test-component-entity-api-9","t":1641981884,"v":{"RuleVersion":{},"activation_date":1641981884,"children":[],"component":"test-component-entity-api-9","connector":"test-connector-entity-api-9","connector_name":"test-connector-name-entity-api-9","creation_date":1641981884,"display_name":"KXT-QZS-4YA","events_count":2,"infos":{},"initial_long_output":"","initial_output":"test-output-entity-api-9","last_event_date":1642068275,"last_update_date":1642068275,"long_output":"","long_output_history":[""],"output":"test-output-entity-api-9","parents":[],"pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"pbh_inactive_duration":0,"related_parents":null,"resource":"test-resource-entity-api-9","snooze_duration":0,"state":{"_t":"statedec","a":"test-connector-entity-api-9.test-connector-name-entity-api-9","m":"test-output-entity-api-9","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1642068275,"val":0},"status":{"_t":"statusdec","a":"test-connector-entity-api-9.test-connector-name-entity-api-9","m":"test-output-entity-api-9","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1642068275,"val":0},"steps":[{"_t":"stateinc","a":"test-connector-entity-api-9.test-connector-name-entity-api-9","m":"test-output-entity-api-9","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981874,"val":2},{"_t":"statusinc","a":"test-connector-entity-api-9.test-connector-name-entity-api-9","m":"test-output-entity-api-9","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1641981874,"val":1},{"_t":"statedec","a":"test-connector-entity-api-9.test-connector-name-entity-api-9","m":"test-output-entity-api-9","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1642068275,"val":0},{"_t":"statusdec","a":"test-connector-entity-api-9.test-connector-name-entity-api-9","m":"test-output-entity-api-9","statecounter":{"statechanges":0,"statedec":0,"stateinc":0},"t":1642068275,"val":0}],"tags":[],"total_state_changes":2}},"current_entity":null,"debug":false,"duration":0,"event_type":"","execution_time":0,"extra":null,"initiator":"","long_output":"","ma_children":[],"ma_parents":[],"ma_related_parents":null,"metaalarm_rule_id":"","metaalarm_value_path":"","output":"","pbehavior_info":{"canonical_type":"","id":"","name":"","reason":"","timestamp":null,"type":"","type_name":""},"perf_data":null,"perf_data_array":null,"resource":"test-resource-entity-api-9","routing_key":"","source_type":"","stat_name":"","state":0,"state_type":null,"status":null,"ticket":"","timestamp":-62135596800,"user_id":""} 
