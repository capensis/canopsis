<template lang="pug">
  v-layout(column)
    v-layout(row)
      v-flex(xs4)
        junit-state-setting-method-field(v-field="form.method")
    v-layout(v-if="isWorstOfShareMethod", column)
      v-layout(row)
        h4.subheading.font-weight-bold {{ $t('stateSetting.junit.worstLabel') }}
        c-help-icon(:text="$t('stateSetting.junit.worstHelpText')", icon-class="ml-2", max-width="220", right)
      junit-state-setting-threshold-field.pl-4.pt-2(
        v-field="form.junit_thresholds.skipped",
        :label="$t('common.skipped')",
        name="junit_thresholds.skipped"
      )
      junit-state-setting-threshold-field.pl-4.pt-2(
        v-field="form.junit_thresholds.errors",
        :label="$tc('common.error', 2)",
        name="junit_thresholds.errors"
      )
      junit-state-setting-threshold-field.pl-4.pt-2(
        v-field="form.junit_thresholds.failures",
        :label="$t('common.failures')",
        name="junit_thresholds.failures"
      )
</template>

<script>
import { JUNIT_STATE_SETTING_METHODS } from '@/constants';

import JunitStateSettingMethodField from './fields/junit-state-setting-method-field.vue';
import JunitStateSettingThresholdField from './fields/junit-state-setting-thresholds-field.vue';

export default {
  components: {
    JunitStateSettingMethodField,
    JunitStateSettingThresholdField,
  },
  model: {
    prop: 'form',
    event: 'input',
  },
  props: {
    form: {
      type: Object,
      default: () => ({}),
    },
  },
  computed: {
    isWorstOfShareMethod() {
      return this.form.method === JUNIT_STATE_SETTING_METHODS.worstOfShare;
    },
  },
};
</script>
