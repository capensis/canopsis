# Notes de version Canopsis 4.5.0

Canopsis 4.5.0 a été publié le xx février 2022.

## Procédure d'installation

Suivre la [procédure d'installation de Canopsis](../guide-administration/installation/index.md).

## Procédure de mise à jour

Canopsis 4.5.0 apporte des changements importants tant au niveau technique que fonctionnel. À ce titre, le [Guide de migration vers Canopsis 4.5.0](migration/migration-4.5.0.md) doit obligatoirement être suivi pour les mises à jour d'installations déjà en place.

## Problèmes connus

### Plugin d'enrichissement externe `datasource` (`engine-che`) non fonctionnel

Le plugin d'enrichissement externe [`datasource`](../guide-administration/moteurs/moteur-che.md#activation-des-plugins-denrichissement-externe-datasource) pour `engine-che` n'est pas fonctionnel avec Canopsis 4.3.0 (bug #3748).

Ce plugin n'est pas activé par défaut. Si vous utilisez cette fonctionnalité, il est recommandé de ne pas mettre à jour vers Canopsis 4.4.0 et d'attendre une nouvelle version résolvant cette incompatibilité.

## Changements entre Canopsis 4.4.x et 4.5.0

### KPI

A détailler

### Liste des modifications

*  **UI :**
    * Ajout d'un helper Handlebars `replace` (#4004)
    * **Exploitation**
        * Ajout d'une zone de commentaire sur les webhooks dans les scénarios (#3995)
        * Ajout de la possibilité de visualiser une règle de récurrence sur un calendrier (#130)
    * **Administration**
        * Ajout d'un menu `Bilan de santé` présentant les informations de healthcheck (#3807)
    * **Bac à alarmes**
        * Correction du freeze qui pouvait avoir lieu lors du scroll vertical du bac à alarmes (#3889)
        * Maintient de l'entête (nom des colonnes) du tableau d'alarmes (#3889, #227)
    * **Explorateur de contexte**
        * La suppression de masse est à nouveau disponible pour les entités (#3861)
    * **Junit**
        * Le diagramme de Gantt embarque à présent une étape contenant le temps total d'exécution (#3968)
*  **API :**
    * L'API est maintenant capable de mettre à jour les valeurs de Timezone et UserInterface chaque minute (#3985)
    * **Healthcheck**
        * Ajout d'une API `healthcheck` permettant de connaitre l'état de santé des composants de Canopsis (#3803)
    * **Authentfication SAML**
        * Ajout de la possibilité de 'mapper' les rôles de l'Idp sur les rôles de Canopsis (#4035)
*  **Moteurs :**
    * **Webhook**
        * Ajout de messages de log (niveau WRN) lorsqu'une tentative échoue (#4049)
    * **Axe**
        * Correction d'un rash du moteur entrainé par la publication d'un snooze sans durée (#4078)
    * **Che**
        * Correction d'une gestion de cache pour des services qui pouvait ne pas être mis à jour correctement (#4109)
    * **Remediation**
        * Correction d'un bug qui faisait échouer une remédiation au timeout de l'expiration d'un lock (#4096)
        * Correction d'un bug qui ajoutait des étapes de timeline sur une mauvaise alarme (#4099)
*  **Général :**
    * Passage de mongoDB 3.6 à mongoDB 4.2 (#3756)
    * Correction d'un bug qui empêchait le bon fonctionnement du `random-feeder` (#4082)
